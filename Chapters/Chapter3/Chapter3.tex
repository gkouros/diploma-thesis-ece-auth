% Chapter Template

\chapter{Αυτόνομη Πλοήγηση σε Άγνωστο Περιβάλλον} % Main chapter title
\label{Chapter3} % Change X to a consecutive number; for referencing this chapter elsewhere, use \ref{ChapterX}

Στο παρόν κεφάλαιο θα παρουσιαστούν μέθοδοι και αλγόριθμοι που χρησιμοποιήθηκαν στη ρομποτική πλατφόρμα Monstertruck, για να καταστεί δυνατή η αυτόνομη πλοήγηση της σε ένα άγνωστο περιβάλλον. Θα μας απασχολήσουν θέματα σχετικά με τον εντοπισμό της θέσης του ρομποτικού οχήματος στον χώρο και την χαρτογράφηση του χώρου αυτού, μέσω μετρήσεων από τους αισθητήρες του ρομπότ αλλά και την ασφαλή και κινηματικά εφικτή αυτόνομη πλοήγηση μέσα σε αυτόν, αποσκοπώντας στην άφιξη σε έναν δεδομένο στόχο, ή την πλήρη εξερεύνηση του χώρου.

%----------------------------------------------------------------------------------------
%	SECTION 1: State Estimation, Mapping and SLAM
%----------------------------------------------------------------------------------------
\section{Εντοπισμός Θέσης και Χαρτογράφηση} \label{sec:localization_and_mapping}
Κατά την αυτόνομη πλοήγηση, ένα ρομποτικό όχημα θα πρέπει να γνωρίζει την θέση και τον προσανατολισμό του, δηλαδή την \textit{πόζα} του, ως προς ένα συγκεκριμένο αδρανειακό πλαίσιο. Το πρόβλημα εντοπισμού θέσης (localization), συνήθως λύνεται βάσει ενός συνόλου μεθόδων που παρέχουν πληροφορία, σχετικά με την πόζα του ρομπότ. Η πληροφορία αυτή μπορεί να είναι είτε \textit{απόλυτη}(global localization), είτε \textit{σχετική} (local localization) \cite{autonomous_land_vehicles}. Για παράδειγμα, αισθητήρες GPS, παρέχουν απόλυτη πληροφορία για την πόζα ενός ρομποτικού οχήματος. Αντίθετα, αισθητήρες, που μετρούν ταχύτητες ή ανιχνεύουν οπτικά χαρακτηριστικά στο περιβάλλον, παρέχουν μία σχετική πληροφορία της νέας πόζας του ρομποτικού οχήματος, ως προς την προηγούμενη.

\bigskip
Συνήθως, στις σύγχρονες ρομποτικές εφαρμογές, χρησιμοποιείται πληθώρα αισθητήρων και άρα πηγών πληροφορίας, είτε σχετική, είτε απόλυτη, σχετικά με την πόζα του ρομποτικού οχήματος και επομένως απαιτούνται μέθοδοι συνδυασμού και συγχώνευσης της πληροφορίας από όλες τις πηγές, για την παραγωγή μίας πιο αξιόπιστης εκτίμησης της κατάστασης του. Για την εξυπηρέτηση του σκοπού αυτού, ιδιαίτερα δημοφιλή λύση, αποτελεί η χρήση πιθανοτικών μεθόδων, όπως τα {Φίλτρα Kalman}, ο {Εντοπισμός Θέσης Markov} ({Markov Localization}) και \textit{Monte Carlo} ({Monte Carlo Localization}).

\bigskip
Για να μπορεί ένα ρομπότ να ξέρει ανά πάσα στιγμή την θέση του και να μπορεί να πλοηγηθεί σε ένα άγνωστο περιβάλλον για να φτάσει σε κάποιον στόχο, αποφεύγοντας, ταυτόχρονα, τυχόν εμπόδια, θα πρέπει να διαθέτει μία μέθοδο χαρτογράφησης του περιβάλλοντος του. Επομένως, η χαρτογράφηση αποτελεί μία απαραίτητη ικανότητα για κάθε αυτόνομο ρομπότ, που προορίζεται για χρήση σε άγνωστο περιβάλλον. Μία αξιόπιστη μέθοδος χαρτογράφησης, όμως, προϋποθέτει και μία αποδοτική και εύρωστη μέθοδο εντοπισμού θέσεις. Γι αυτό το λόγο, υπάρχει το ευρέως μελετημένο αντικείμενο αλγορίθμων {Ταυτόχρονης Χαρτογράφησης και Εντοπισμού Θέσης} ({SLAM}).

\bigskip
\subsection{Οδομετρία} \label{ssec:odometry}
%--------------------%
Η Οδομετρία είναι μία μέθοδος υπολογισμού της μεταβολής της {πόζας} ενός ρομποτικού οχήματος. Οι πιο δημοφιλείς μέθοδοι οδομετρίας, σε ρομποτικές εφαρμογές, είναι η {οδομετρία τροχών (wheel odometry)} και η {οπτική οδομετρία (visual odometry)}. Η {οδομετρία τροχών} χρησιμοποιεί τις μετρήσεις των ταχυτήτων των τροχών ενός ρομποτικού οχήματος για την εξαγωγή της ταχύτητας αυτού και μέσω ολοκλήρωσης της ταχύτητας, υπολογίζει την μεταβολή της πόζας του οχήματος. Αντίστοιχα, η {οπτική οδομετρία}, χρησιμοποιεί μία κάμερα για τον υπολογισμό της μεταβολής της πόζας του οχήματος, μέσω των μεταβολών, μεταξύ διαδοχικών εικόνων. Στην προκειμένη περίπτωση, παρόλα αυτά, θα μας απασχολήσει μόνο η περίπτωση της {οδομετρίας τροχών}.

\bigskip
Η {οδομετρία τροχών} απαιτεί την μέτρηση της ταχύτητας κάθε τροχού και με βάση το κινηματικό μοντέλο την εξαγωγή των ταχυτήτων του οχήματος. Παρόλα αυτά, η ρομποτική πλατφόρμα {Monstetruck}, δεν περιλαμβάνει ξεχωριστούς κινητήρες και αισθητήρες μέτρησης ταχύτητας για κάθε τροχό, αλλά μόνο έναν κινητήρα του συστήματος {τετρακίνησης}, που μεταδίδει την κίνηση και στους τέσσερις τροχούς. Επομένως, θα λάβουμε την παραδοχή, ότι οι ταχύτητες κάθε τροχού υπακούν στις εξισώσεις (\ref{eq:monst_vif})-(\ref{eq:monst_vor}) του κινηματικού μοντέλου της ρομποτικής πλατφόρμας {Monstertruck}, με βάση την μέτρηση της ταχύτητας που παρέχει ο εν λόγω κινητήρας.

\bigskip
Η γραμμική ταχύτητα του οχήματος προκύπτει από την μέτρηση της ταχύτητας του κινητήρα, ως
\begin{equation}
	v_c = \frac{\omega_{motor}}{644 \cdot r}
\end{equation}

\bigskip\noindent
ενώ  οι γωνίες στρέψης $\delta_{lf}, \delta_{rf}, \delta_{lr}, \delta_{rr}$ των τροχών, υπολογίζονται από τις γωνίες στρέψεις των σερβοκινητήρων και τις σχέσεις (\ref{eq:polynoms}).

\bigskip
Με βάση τις γωνίες στρέψης των τροχών, μπορούμε να υπολογίσουμε τις γωνίες στρέψης $\delta_f, \delta_r$ του {ισοδύναμου κινηματικού μοντέλου ποδηλάτου τετραδιεύθυνσης}, μέσω των τύπων  (\ref{eq:df}),(\ref{eq:dr}) και, επομένως, την γωνία πλευρικής ολίσθησης $\beta$ του κέντρου μάζας $C$ του οχήματος, βάσει του τύπου (\ref{eq:neg_4ws_beta}).

\bigskip
Έπειτα, μέσω της γωνίας πλευρικής ολίσθησης $\beta$, των γωνιών στρέψης $\delta_f, \delta_r$ και της συνισταμένης γραμμικής ταχύτητας του κέντρου μάζας $C$ του οχήματος $v_c$, μπορούμε να υπολογίσουμε τις συνιστώσες της γραμμική ταχύτητας $v_x, v_y$, αλλά και την γωνιακή ταχύτητα $\omega_c$ του οχήματος, μέσω των τύπων (\ref{eq:lin_vel_x})-(\ref{eq:ang_vel}).

\bigskip
Με βάση τους K. Bohlmann et al. \cite{automated_odometry}, μέσω γεωμετρικής προσέγγισης των κυκλικών τροχιών για μικρά διαστήματα Δt, ως γραμμικές τροχιές, η νέα πόζα του οχήματος, μπορεί να υπολογιστεί, σε σχέση με την προηγούμενη, βάσει των ακόλουθων τύπων.

\begin{align}
	X_{i} &= X_{i-1} + \Delta d \cdot \cos(\Theta_{i-1} + \frac{\Delta\Theta}{2} + \beta_{i-1} + \frac{\Delta\beta}{2})\\
	Y_{i} &= Y_{i-1} + \Delta d \cdot \sin(\Theta_{i-1} + \frac{\Delta\Theta}{2} + \beta_{i-1} + \frac{\Delta\beta}{2})\\
	\Theta_{i} &= \Theta_{i-1} + \Delta\Theta
\end{align}

\noindent
όπου
\begin{align}
	\Delta d &= v_c \cdot \Delta T\\
	\Delta\Theta &= \omega_c \cdot \Delta T
\end{align}

\bigskip
Τέλος, το γενικό πρόβλημα με την οδομετρία έγκειται στην ολοκλήρωση των ταχυτήτων, όπου, λόγω, ολίσθησης, σφαλμάτων μετρήσεων και ατελειών κινηματικού ή δυναμικού μοντέλου, εισάγεται ολοκληρωτικό σφάλμα που αυξάνεται όλο και περισσότερο με το πέρασμα του χρόνου. Το γεγονός αυτό, καθιστά την μέθοδο της οδομετρίας τροχών, ανεπαρκή ως αυτοτελή μέθοδο εντοπισμού θέσης.

\bigskip
Πολλές φορές παράλληλα, με την οδομετρία τροχών χρησιμοποιούνται και αισθητήρες κατεύθυνσης (πυξίδα, IMU), που μπορεί να παρέχουν μετρήσεις της γωνιακής ταχύτητας, γραμμικής επιτάχυνσης και απόλυτου προσανατολισμού ως προς τους άξονες x,y,z.

\bigskip
Στην ρομποτική πλατφόρμα {Monstertruck}, όπως προαναφέρθηκε στην ενότητα \ref{ssec:electronic_equipment}, χρησιμοποιείται μία πυξίδα {Compass OS4000}, που διαθέτει μαγνητόμετρο και επιταχυνσιόμετρο και άρα παρέχει πληροφορία για τον απόλυτο προσανατολισμό $yaw, pitch, roll$ και την γραμμική επιτάχυνση $a_x, a_y, a_z$, ως προς τους άξονες x,y,z. Επίσης, οι γραμμικές επιταχύνσεις, μπορούν να ολοκληρωθούν, για τον υπολογισμό της μεταβολής των γραμμικών ταχυτήτων $u_x, u_y, u_z$ του οχήματος, ενώ με δεύτερη ολοκλήρωση, για τον υπολογισμό της μεταβολής της θέσης $X, Y, Z$. Παρόλα αυτά, οι εν λόγω μετρήσεις, δεν είναι αρκετά αξιόπιστες και είναι επιρρεπείς σε συσσωρευτικά σφάλματα.

\bigskip
Οι μετρήσεις της πυξίδας, μπορούν να χρησιμοποιηθούν, συμπληρωματικά με τις μετρήσεις της {οδομετρίας τροχών}, με στόχο την εξαγωγή της 5D κατάστασης $q = [x, y, roll, pitch, yaw]$  του οχήματος και τον πιο αξιόπιστο εντοπισμό θέσης.

\bigskip
\subsection{Εκτίμηση Κατάστασης με Συνδυαστική Αντίληψη} 
\label{ssec:state_estimation_and_sensor_fusion}
Για την εκτίμηση της \textit{κατάστασης} ενός ρομπότ, μπορούν να χρησιμοποιηθούν μία πληθώρα αλγόριθμων που αξιοποιούν διαφορετικούς αισθητήρες, όπως κωδικοποιητές τροχών, πυξίδες, IMU, GPS, κάμερες, σαρωτές λέιζερ  κ.α., που καθένας, παρόλα αυτά, παρουσιάζει αβεβαιότητα στις εκτιμήσεις του. Η \textit{συνδυαστική αντίληψη} ({sensor fusion}) χρησιμοποιεί τις εκτιμήσεις που παράγονται με βάση τους διάφορους αισθητήρες που χρησιμοποιούνται και παράγει μία βελτιωμένη εκτίμηση της κατάστασης του ρομπότ. Μία δημοφιλής μέθοδος συνδυαστικής αντίληψης αποτελεί η χρήση πιθανοτικών φίλτρων για την εκτίμηση του μέσου διανύσματος κατάστασης και του πίνακα συμμεταβλητότητας.

\bigskip
Τα φίλτρα Kalman αποτελούν μία εξαιρετικά δημοφιλή επιλογή για εκτίμηση κατάστασης σε ρομποτικές εφαρμογές. Στη ρομποτική, τα {Φίλτρα Kalman} περιλαμβάνουν ένα μοντέλο κίνησης και ένα μοντέλο μετρήσεων, όπου το μοντέλο κίνησης αναπαριστά την σχέση μεταξύ των εντολών κίνησης και της κατάστασης του ρομπότ, ενώ το μοντέλο μετρήσεων αποτελείται από τα δεδομένα που προέρχονται από τους αισθητήρες, όσον αφορά την θέση του ρομπότ. Τα φίλτρα Kalman, χρησιμοποιούν έναν αλγόριθμο πρόβλεψης δύο σταδίων που επαναλαμβάνεται μετά από κάθε χρονικό βήμα και ανανέωση των μετρήσεων. Πρώτον, προβλέπει την εκτίμηση κατάστασης και τον πίνακα συμμεταβλητότητας με βάση τις προηγούμενες καταστάσεις για την εκτίμηση της νέας κατάστασης. Έπειτα, όταν έρθει κάποια μέτρηση από τους αισθητήρες, διορθώνει την προβλεπόμενη εκτίμηση.

\bigskip
Τα παραδοσιακά φίλτρα Kalman μπορούν να χειριστούν μονάχα γραμμικά συστήματα και επειδή τα περισσότερα ρομποτικά συστήματα είναι άκρως μη γραμμικά, η χρήση τους είναι προβληματική. Γι αυτό το λόγο αναπτύχθηκαν παραλλαγές των φίλτρων Kalman, όπως τα {Εκτεταμένα Φίλτρα Kalman} ({EKF}). Για τον χειρισμό των μη γραμμικών συστημάτων, τα {EKF} γραμμικοποιούν τους μη γραμμικούς μετασχηματισμούς και αντικαθιστούν τους Ιακωβιανούς Πίνακες με τους γραμμικούς μετασχηματισμούς στα παραδοσιακά Φίλτρα Kalman. Παρόλα αυτά, οι μέθοδοι αυτοί είναι ανεπαρκής για τον εκ νέου εντοπισμό της θέσης του ρομπότ, ενώ, επίσης, είναι επιρρεπείς σε αποκλίσεις σε περίπτωση προβληματικής αρχικοποίησης και επομένως δεν μπορούν να επανέλθουν σε περίπτωση αποτυχίας.

\bigskip
Στην ρομποτική πλατφόρμα {Monstertruck} χρησιμοποιείται ένα EKF για την πιθανοτική εκτίμηση της κατάστασης του ρομπότ, βάσει των μετρήσεων του συστήματος οδομετρίας των τροχών και των μετρήσεων της πυξίδας που αναφέρθηκαν στην προηγούμενη ενότητα.

\bigskip
\subsection{Ταυτόχρονη Χαρτογράφηση και Εντοπισμός Θέσης} \label{ssec:slam}
%--------------------------------------------------------%
Στην βιβλιογραφία, συναντάται πληθώρα αλγορίθμων SLAM, ενώ τα τελευταία χρόνια, έχουν κυκλοφορήσει και αρκετές υλοποιήσεις ανοικτού κώδικα. Σημαντική εξέλιξη, επίσης, τα τελευταία χρόνια αποτελεί και η εμφάνιση αλγορίθμων 3D SLAM, που πραγματοποιούν χαρτογράφηση και εντοπισμό θέσης στον χώρο, αντί για το επίπεδο, περίπτωση που παρόλα αυτά δε μας απασχόλησε στα πλαίσια της παρούσας διπλωματικής.

\bigskip
Οι περισσότεροι δισδιάστατοι αλγόριθμοι SLAM χρησιμοποιούν, βασικά, ένα σύνολο μετρήσεων από αισθητήρες απόστασης και δεδομένα οδομετρίας με στόχο την εκτίμηση της θέσης του ρομπότ και παραγωγή ενός χάρτη του περιβάλλοντος.  Αυτά επιτυγχάνονται, μέσω τεχνικών, όπως τα {Φίλτρα Kalman} ({Kalman Filters}), τα {Φίλτρα Σωματιδίων} ({Particle Filters}) και η {Αντιστοίχιση Σκαναρισμάτων} απόστασης ({Scan Matching}).

\bigskip
Υπάρχουν δύο βασικοί τύποι χάρτη, που παράγονται από αλγορίθμους {SLAM}. Ο τοπολογικός χάρτης είναι μία αναπαράσταση του περιβάλλοντος που στοχεύει στην αποτύπωση της συνδετικότητας του περιβάλλοντος και όχι στην παραγωγή ενός γεωμετρικά ακέραιου χάρτη. Αντίθετα, οι Χάρτες Πλέγματος Κατάληψης (OGM) χρησιμοποιούν πίνακες με διακριτά κελιά, για μετρική αναπαράσταση του περιβάλλοντος, όπου κάθε κελί εκφράζεται από έναν αριθμό που δηλώνει την πεποίθηση για την κατάσταση κατάληψης του κελιού, δηλαδή κατειλημμένο, ελεύθερο ή άγνωστο.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.7\linewidth]{Chapters/Chapter3/Figures/ogm_and_tm.png}
	\label{fig:ogm_and_tm}
	\caption[Μετρικός 2D χάρτης και αντίστοιχος τοπολογικός χάρτης σε μορφή γράφου.]{Μετρικός 2D χάρτης και αντίστοιχος τοπολογικός χάρτης σε μορφή γράφου \cite{probabilistic_robotics}.}
\end{figure}

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.4\linewidth]{Chapters/Chapter3/Figures/ogm.jpg}
	\label{fig:ogm}
	\caption[Χάρτης πλέγματος κατάληψης κελιού.]{Χάρτης πλέγματος κατάληψης κελιού \cite{crsm}.}
\end{figure}

\bigskip
Στην παρούσα διπλωματική εξετάστηκαν δύο αλγόριθμοι 2D SLAM, οι οποίοι χρησιμοποιούν αισθητήρες απόστασης και στην προκειμένη περίπτωση έναν {σαρωτή λέιζερ} και παράγουν χάρτες πλέγματος κατάληψης (Occupancy Grid Maps). Πρόκειται για τους αλγορίθμους CRSM-SLAM \cite{crsm} και GMapping \cite{gmapping}.

\bigskip
\subsubsection{CRSM-SLAM} \label{sssec:crsm_slam}
Ο αλγόριθμος CRSM-SLAM βασίζεται στην τεχνική της αντιστοίχισης σκαναρισμάτων απόστασης, που παρέχει ένας {σαρωτής λέιζερ}. Με βάση την τεχνική αυτή, η πόζα ενός ρομπότ και ο χάρτης, μπορούν να υπολογιστούν, χρησιμοποιώντας τον δισδιάστατο μετασχηματισμό μεταξύ διαδοχικών σκαναρισμάτων ενός σαρωτή λέιζερ. Ο αλγόριθμος CRSM-SLAM, πραγματοποιεί αντιστοίχιση σκαναραρισμάτων, σε σκαναρίσματα που έχουν υποστεί προεπεξεργασία, μέσω μίας μεθόδου επιλογής κρίσιμων, για την επιλογή, ακτίνων (ray selection method). Με αυτόν τον τρόπο, επιτυγχάνεται μείωση της πολυπλοκότητας και του χρόνου που απαιτείται για την διαδικασία αντιστοίχισης. Επίσης, πραγματοποιεί και αντιστοίχιση του τρέχοντος σκαναρίσματος, με τον ολικό χάρτη, που έχει κατασκευασθεί, με στόχο την μείωση των συσσωρευτικών σφαλμάτων.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.4\linewidth]{Chapters/Chapter3/Figures/crsm_slam_diagram.png}
	\label{fig:crsm_slam_diagram.png}
	\caption[Διάγραμμα σταδίων του αλγορίθμου CRSM-SLAM.]{Διάγραμμα σταδίων του αλγορίθμου CRSM-SLAM \cite{crsm}.}
\end{figure}


\bigskip
Ο αλγόριθμος {CRSM-SLAM} αποτελεί μία αποδοτική και αξιόπιστη υλοποίηση, που μπορεί να χρησιμοποιηθεί σε υπολογιστικά συστήματα, με χαμηλή υπολογιστική ισχύ και απαιτεί μόνο έναν {σαρωτή λέιζερ} για την παροχή πληροφορίας για το περιβάλλον, για την χαρτογράφηση και τον εντοπισμό θέσης του ρομπότ. Παρόλα αυτά, προϋποθέτει ένα δομημένο περιβάλλον με αρκετά {κρίσιμα} χαρακτηριστικά (γωνίες, τελειώματα ή ασυνέχειες τοίχων κλπ.), έτσι ώστε να μπορεί να κάνει αξιόπιστη αντιστοίχιση των διαδοχικών σκαναρισμάτων. Επομένως, δεν είναι κατάλληλος για ανοιχτό περιβάλλον, ή μεγάλους ομοιόμορφους διαδρόμους, όπου δεν αρκεί η εμβέλεια του {σαρωτή λέιζερ}. 

\subsubsection{GMapping} \label{sssec:gmapping}
Ο αλγόριθμος {GMapping} αποτελεί έναν αλγόριθμο {SLAM}, που βασίζεται σε {Rao-Blackwellized φίλτρα σωματιδίων} για την παραγωγή {χαρτών πλέγματος κατάληψης}. Παράλληλα, χρησιμοποιεί, προσαρμοστικές τεχνικές για την μείωση του αριθμού των σωματιδίων, ενώ λαμβάνει υπόψιν την κίνηση του ρομπότ και τις πιο πρόσφατες μετρήσεις των αισθητήρων απόστασης, για την μείωση της αβεβαιότητας σχετικά με την πόζα του ρομπότ, κατά το στάδιο της πρόβλεψης.

\bigskip
Στην παρούσα διπλωματική, ο αλγόριθμος GMapping, χρησιμοποιήθηκε σε συνδυασμό με σκαναρίσματα από έναν σαρωτή λέιζερ και οδομετρία από ένα εκτεταμένο φίλτρο Kalman, που συνδυάζει πληροφορία οδομετρίας τροχών και πυξίδας για την παραγωγή μίας πιο εύρωστης εκτίμησης της κατάστασης του ρομπότ, σε αντίθεση με την χρήση απλής οδομετρίας. Το δεδομένο σύστημα, θα μπορούσε να επεκταθεί περαιτέρω με προσθήκη οπτικής οδομετρίας από κάμερα, αλλά και πληροφορία από αισθητήρα {GPS}. Η συμπερίληψη της οδομετρίας, κατά τον εντοπισμό θέσης, σε αντίθεση με τον αλγόριθμο {CRSM-SLAM}, καταστεί τον αλγόριθμο {GMapping} κατάλληλο και για εσωτερικούς και εξωτερικούς χώρους, αλλά με το μειονέκτημα των μεγαλύτερων απαιτήσεων σε πηγές πληροφορίας και μία υψηλή εξάρτηση από ένα εξωτερικό σύστημα εκτίμησης κατάστασης και της αντίστοιχης αξιοπιστίας αυτού. 

%----------------------------------------------------------------------------------------
%	SECTION 2: Autonomous Navigation
%----------------------------------------------------------------------------------------
\section{Αυτόνομη Πλοήγηση} \label{sec:autonomous_navigation}
Στις προηγούμενες ενότητες ασχοληθήκαμε με την κινηματική ανάλυση, την ρομποτική αντίληψη, την χαρτογράφηση και τον εντοπισμό θέσης, ικανότητες απαραίτητες για την αυτόνομη πλοήγηση σε άγνωστο περιβάλλον, δηλαδή την ικανότητα ενός ρομποτικού οχήματος να μεταβεί από μία αρχική θέση σε μία τελική, αυτόνομα, αποφεύγοντας, ταυτόχρονα εμπόδια και γενικότερα ανεπιθύμητες καταστάσεις.

\bigskip
Η αυτόνομη πλοήγηση ενός ρομποτικού οχήματος σχετίζεται άμεσα με την ευφυΐα ενός ρομπότ, όσον αφορά την λήψη αποφάσεων και την εκτέλεση στόχων που ορίζονται από λειτουργίες υψηλότερου επιπέδου, όπως για παράδειγμα η λειτουργία της \textit{επιλογής στόχων} (\textit{target selection}). Επομένως, η επάρκεια της ικανότητας αυτόνομης πλοήγησης ενός ρομπότ συνεπάγεται μία εύρωστη ευφυΐα κίνησης, ούτως ώστε με μερική γνώση του περιβάλλοντος και με δεδομένους στόχους να δρα αποδοτικά, αξιόπιστα και με ασφάλεια για την επίτευξη των στόχων αυτών.

\bigskip
Ένας πολύ σημαντικός όρος για τον τομέα της αυτόνομης πλοήγησης αποτελεί ο όρος της \textit{πληρότητας} (\textit{completeness}). Με βάση τον ορισμό της πληρότητας, ένα σύστημα αυτόνομης πλοήγησης είναι \textit{πλήρες}, εάν μπορεί να βρει λύση στο πρόβλημα επίτευξης ενός στόχου, εάν αυτή υπάρχει. Παρόλα αυτά, συνήθως, στις περισσότερες πρακτικές εφαρμογές, η πληρότητα του συστήματος θυσιάζεται για χάρη της υπολογιστικής πολυπλοκότητας. Επομένως, μας ενδιαφέρει η λύση ενός προβλήματος να μπορεί να βρεθεί σε πραγματικό χρόνο (real-time) και να καταναλώνει όσο το δυνατόν λιγότερους υπολογιστικούς πόρους.

\bigskip
Για την αντιμετώπιση του προβλήματος της αυτόνομης πλοήγησης, οι περισσότερες προσεγγίσεις προτείνουν κατανεμημένες αρχιτεκτονικές, που διασπούν το πρόβλημα σε επιμέρους υποπροβλήματα, προς αντιμετώπιση. Με αυτόν τον τρόπο επιτυγχάνεται δραστική μείωση της πολυπλοκότητας, παροχή δυνατότητας πιο αποδοτικής και απλουστευμένης υλοποίησης, ελέγχου και αποσφαλμάτωσης κάθε επιμέρους τμήματος, αλλά και δυνατότητα επαναχρησιμοποίησης τμημάτων σε άλλες προσεγγίσεις.

\bigskip
Η πιο δημοφιλής αρχιτεκτονική αυτόνομης πλοήγησης διασπά το πρόβλημα σε δύο επιμέρους υποπροβλήματα, προβλήματα αντίθετα, αλλά, ταυτόχρονα, συμπληρωματικά \cite{autonomous_mobile_robots}. Το πρώτο πρόβλημα προς επίλυση αποτελεί η \textit{κατασκευή μονοπατιού} (\textit{path planning}), η οποία, κατά το πλείστον, χρησιμοποιεί έναν χάρτη του περιβάλλοντος, τη θέση του ρομπότ και τη θέση του τρέχοντα στόχου, με σκοπό την κατασκευή ενός μονοπατιού που επιτρέπει στο ρομπότ την πλοήγηση προς τον στόχο, αποφεύγοντας στατικά εμπόδια. Το δεύτερο πρόβλημα προς επίλυση αποτελεί η \textit{αποφυγή εμποδίων}(\textit{obstacle avoidance}), η οποία χρησιμοποιεί τις πιο πρόσφατες μετρήσεις αισθητήρων ή και ένα τοπικό τμήμα του παραγομένου χάρτη, με στόχο την παραμόρφωση του κατασκευασμένου μονοπατιού για αποφυγή απρόσμενων εμποδίων και καταστάσεων, αλλά και την παραγωγή εφικτών κινηματικά και δυναμικά τροχιών, από το ρομπότ. Επομένως, η κατασκευή μονοπατιού σχετίζεται με μακροπρόθεσμο σχεδιασμό για την επίτευξη του δοσμένου στόχου, ενώ η αποφυγή εμποδίων σχετίζεται με την βραχυπρόθεσμη λήψη αποφάσεων για την ασφαλή πλοήγηση προς τον δοσμένο στόχο, συνδυάζοντας σχεδιασμό και εκτέλεση, βάσει της πιο πρόσφατης αντίληψης για το περιβάλλον.

\bigskip
Στην παρούσα διπλωματική εξετάζονται δύο αρχιτεκτονικές συστήματος αυτόνομης πλοήγησης. Η πρώτη αρχιτεκτονική επεκτείνει την προσέγγιση, που αναφέρθηκε παραπάνω, διασπώντας τη λειτουργία της αποφυγής εμποδίων σε τρία επιμέρους στάδια. Το σύνολο των σταδίων αυτών, αποτελείται από ένα στάδιο παραμόρφωσης μονοπατιού για απομάκρυνση από εμπόδια, στατικά ή δυναμικά, ένα στάδιο μετατροπής του παραμορφωμένου μονοπατιού σε ένα νέο κινηματικά εφικτό μονοπάτι και ένα τελευταίο στάδιο που είναι υπεύθυνο για την διάσχιση του μονοπατιού, μέσω κινηματικά εφικτών εντολών στο χώρο \textit{ταχύτητας-στρέψης} ($v$, $\delta_f$, $\delta_r$). Αντίθετα, η δεύτερη αρχιτεκτονική που εξετάζεται χρησιμοποιεί έναν αλγόριθμο κατασκευής κινηματικά εφικτών μονοπατιών με δυναμική ανακατασκευή (dynamic replanning), σε περίπτωση δυναμικών εμποδίων ή γενικά απρόσμενων καταστάσεων, σε συνδυασμό με έναν αλγόριθμο διάσχισης μονοπατιού, αντίστοιχο της πρώτης προσέγγισης.

\bigskip
Η κατασκευή μονοπατιών και η αποφυγή εμποδίων πραγματοποιούνται σε μία αναπαράσταση του περιβάλλοντος, μέσω χαρτών κόστους. Οι \textit{χάρτες κόστους} (\textit{costmaps}) είναι μία δομή αναπαράστασης του περιβάλλοντος που συντίθεται από ένα σύνολο \textit{επιπέδων} (\textit{layers}). Στην προκειμένη περίπτωση, χρησιμοποιούνται τρία επίπεδα, το \textit{στατικό επίπεδο} \textit{static layer} που αναπαριστά τα σχετικά αμετάβλητα τμήματα του χάρτη όπως αυτά παράγονται από έναν αλγόριθμο SLAM, το \textit{επίπεδο εμποδίων} (\textit{obstacle layer}) που αποτελεί μία 2D αναπαράσταση των εμποδίων του περιβάλλοντος, όπου τα κελιά των εμποδίων περιγράφονται από ένα \textit{απαγορευτικό κόστος} (\textit{lethal cost}) που δηλώνει μη προσπελασιμότητα και το \textit{επίπεδο διαστολής} (\textit{inflation layer}) που διαδίδει τα απαγορευτικά κόστη ακτινικά με αποσβενόμενο κόστος κατά μία απόσταση που προσδιορίζεται από τον χρήστη κάθετα από τα εμπόδια. Στα κελιά που βρίσκονται σε απόσταση από τα εμπόδια, μικρότερη της ακτίνας εγγεγραμμένου, στο ρομπότ, κύκλου, ανατίθεται ένα υψηλό κόστος, ενώ στα επόμενα το κόστος υπολογίζεται από μία εκθετικά φθίνουσα συνάρτηση, τέτοια ώστε το κόστος μηδενίζεται σε απόσταση ίση με την απόσταση που ορίστηκε από τον χρήστη. Με αυτόν τον τρόπο, το ρομπότ μπορεί να αντιμετωπίζεται σαν σημείο που κινείται στον ελεύθερο χώρο, όπου ως ελεύθερος χώρος ορίζεται το σύνολο των κελιών του χάρτη κόστους με μηδενικό κόστος, ή αρκετά χαμηλό κόστος που προσδιορίζεται από τον χρήστη.

\bigskip
Στην συνέχεια, θα παρουσιαστούν τα αντικείμενα της κατασκευής μονοπατιών, της αποφυγής εμποδίων και της διάσχισης μονοπατιού όπως επίσης και η σχετική βιβλιογραφία, αλλά και οι τελικοί αλγόριθμοι που χρησιμοποιήθηκαν στο σύστημα αυτόνομης πλοήγησης της ρομποτικής πλατφόρμας Monstertruck.

\subsection{Κατασκευή Μονοπατιού} \label{ssec:path_planning}
%-------------------------------%
Το αντικείμενο της κατασκευής μονοπατιών ξεκίνησε με τους βιομηχανικούς ρομποτικούς βραχίονες για την αυτοματοποίηση γραμμών παραγωγής σε εργοστάσια, αλλά από τότε έχει περιλάβει κάθε είδους ρομποτική εφαρμογή, όπως και η κατασκευή μονοπατιών για πλοήγηση ρομπότ στο επίπεδο (2D path planning) ή στο χώρο (3D path planning), πρόβλημα που αποτελεί αρκετά απλούστερο από αυτό των ρομποτικών βραχιόνων, λόγω λιγότερων βαθμών ελευθερίας και άρα λιγότερες διαστάσεις.

\bigskip
Πριν προχωρήσουμε στην κατασκευή μονοπατιών, αυτή καθ' αυτή, θα πρέπει πρώτα να περιγράψουμε την αναπαράσταση του χώρου στον οποίο πραγματοποιείται η εργασία αυτή. Η αναπαράσταση αυτή, ονομάζεται \textit{χώρος καταστάσεων} (\textit{configuration space}) $C$ και έχει τόσες διαστάσεις όσες και οι βαθμοί ελευθερίας (DOF) του ρομπότ. Στην προκειμένη περίπτωση, εφόσον έχουμε ένα ρομποτικό όχημα που κινείται στο επίπεδο, μιλάμε για τρεις βαθμούς ελεθερίας (3-DOF), όσον αφορά τις καρτεσιανές συντεταγμένες θέσης $(x, y)$ και τον προσανατολισμό $\theta$ του ρομπότ. Ο χώρος αυτός αποτελείται από όλες τις δυνατές καταστάσεις (configurations) $(x, y, \theta)$ που μπορεί να βρεθεί το ρομπότ στον χώρο. Στις περισσότερες περιπτώσεις ένας χώρος δεν είναι πλήρως ελεύθερος, αλλά περιλαμβάνει εμπόδια. Επομένως, ως ελεύθερος χώρος $C_{free}$ ορίζεται ο χώρος καταστάσεων μείον τον υποχώρο των εμποδίων $C_O$, δηλαδή $C_{free} = C - C_O$ και αποτελεί το υποσύνολο του χώρου, στο οποίο, το ρομπότ μπορεί να κινηθεί χωρίς να υποστεί συγκρούσεις.

\bigskip
Ο παραπάνω χώρος καταστάσεων $C$ περιορίζεται περαιτέρω, αν αναλογιστεί κανείς, ότι τα περισσότερα ρομπότ χρησιμοποιούν κινηματικά μοντέλα, όπως Differential-Drive, Skid-Steer- Drive, Ackermann ή Four-Wheel Steering, τα οποία παρουσιάζουν \textit{μη ολονομικούς περιορισμούς} (\textit{nonholonomic constraints}) που περιορίζουν τον χώρο ταχυτήτων $(\dot x, \dot y, \dot \theta)$, σε αντίθεση με \textit{ολονομικά} (\textit{holonomic}) \textit{πανκατευθυντικά} (\textit{omnidirectional}) ρομπότ. Παρόλα αυτά, η συνήθης προσέγγιση έγκειται στην αγνόηση της μη ολονομικότητας για την κατασκευή μονοπατιών, καθώς τα πιο συνήθη ρομποτικά κινηματικά μοντέλα Differential-Drive και Skid-Steer-Drive, θεωρούνται ως ψευδο-ολονομικά, καθώς διαθέτουν δυνατότητα επιτόπου στροφής (0-point turn) και μπορούν να ακολουθήσουν ολονομικά μονοπάτια, ενώ ίδια προσέγγιση ακολουθείται και για ρομπότ με Ackermann ή Four-Wheel Steering, αλλά στην συγκεκριμένη περίπτωση, το πρόβλημα της διάσχισης του μονοπατιού λύνεται σε επόμενο στάδιο. Επίσης, στις περισσότερες προσεγγίσεις, για την διευκόλυνση του προβλήματος της κατασκευής μονοπατιών λαμβάνεται η παραδοχή ότι το ρομπότ είναι ένα κινούμενο σημείο στο 2D χώρο $(x, y)$, ενώ αντί για τα πραγματικά εμπόδια, λαμβάνεται μία διασταλμένη εκδοχή αυτών, κατά την ακτίνα ενός κύκλου, στον οποίο εγγράφεται το ίχνος/αποτύπωμα του ρομπότ. Τέλος, όπως είναι φυσικό, έχουν μελετηθεί και αναπτυχθεί και διαφορετικές προσεγγίσεις που λαμβάνουν υπόψιν κινηματικούς και δυναμικούς περιορισμούς στο στάδιο της κατασκευή μονοπατιού, κατάλληλοι για μη ολονομικά οχήματα. Παρακάτω, θα εξεταστούν και οι δύο περιπτώσεις.

\begin{figure}[!ht]
	\centering
	\includegraphics[width = 0.7\linewidth]{Chapters/Chapter3/Figures/point_robot_and_inflated_obstacles.png}
	\caption[Αναπαράσταση ρομπότ ως σημείο και διαστολή εμποδίων, βάσει της ακτίνας του ρομπότ. ]{Αναπαράσταση ρομπότ ως σημείο και διαστολή εμποδίων, βάσει της ακτίνας του ρομπότ \cite{principles_of_robot_motion}.}
	\label{fig:point_robot_and_inflated_obstacles}
\end{figure}

\bigskip
Όπως αναφέρθηκε παραπάνω, η κατασκευή μονοπατιών λαμβάνει χώρα πάνω σε έναν χάρτη κόστους, ο οποίος παράγεται από τον συνολικό τρέχοντα χάρτη πλέγματος κατάληψης, που έχει παραχθεί από έναν αλγόριθμο SLAM και ονομάζεται \textit{ολικός χάρτης κόστους} (\textit{global costmap}). Ο ολικός χάρτης κόστους, έπειτα, αντιμετωπίζεται ως γράφος και επομένως, η κατασκευή μονοπατιού μετασχηματίζεται σε αναζήτηση μονοπατιού σε γράφο.

\bigskip 
\subsubsection{Αναζήτηση Μονοπατιού σε Γράφο} \label{sssec:graph_search}
Ως \textit{γράφος} $G$ ορίζεται μία συλλογή από \textit{κόμβους} $V$ και \textit{ακμές} $E$. Στην κατασκευή μονοπατιών, ένας κόμβος $V$ αναπαριστά μία θέση στον χώρο, ενώ μία ακμή $E$ αναπαριστά την σύνδεση μεταξύ δύο γειτονικών κόμβων, όπου δύο κόμβοι ορίζεται ως \textit{γειτονικοί} εάν είναι προσπελάσιμοι ο ένας από τον άλλο. Μία ακμή είναι \textit{κατευθυνόμενη} εάν επιτρέπει την μονόδρομη μετάβαση από έναν κόμβο $V_i$ σε έναν άλλο $V_j$ ($E_{ij}$ ή $E_{ji}$) ή μη κατευθυνόμενη εάν επιτρέπει αμφίδρομη μετάβαση ($E_{ij}$ και $E_{ij}$). Επίσης, σε κάθε ακμή $E_{ij}$ ανατίθεται μία τιμή που αναπαριστά το κόστος μετάβασης από τον κόμβο $V_i$ προς έναν γειτονικό κόμβο $V_j$ και ονομάζεται βάρος $w_{ij}$ της ακμής.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.6\linewidth]{Chapters/Chapter3/Figures/directed_and_non_graph.png}
	\caption[Κατευθυνόμενος (αριστερά) και μη κατευθυνόμενος (δεξιά) γράφος.]{Κατευθυνόμενος (αριστερά) και μη κατευθυνόμενος (δεξιά) γράφος \cite{principles_of_robot_motion}.}
	\label{fig:directed_and_non_graph}
\end{figure}

\bigskip
Ως μονοπάτι στον γράφο ορίζεται μία ακολουθία κόμβων $V_i$, τέτοια ώστε, για κάθε $V_i$, $V_{i+1}$ υπάρχει μία ακμή $E_{i\;i+1}$ που ενώνει τους κόμβους $V_i$, $V_{i+1}$. Αν υπάρχει ακμή $E_ij$ για κάθε συνδυασμό κόμβων $V_i$, $V_j$, τότε ο γράφος είναι \textit{συδεδεμένος}.

\bigskip 
Τα δέντρα αποτελούν μία υποπερίπτωση των γράφων και ορίζονται ως συνδεδεμένοι, καυτευθυντικοί άκυκλοι γράφοι, όπου ένας γράφος θεωρείται \textit{άκυκλος} εάν δεν περιέχει κυκλικά μονοπάτια, δηλαδή μονοπάτια που αποτελούνται από μία ακολουθία $n$ κόμβων, όπου ο πρώτος κόμβος $V_1$ ταυτίζεται με τον τελευταίο $V_n$. Τα δέντρα έχουν έναν αρχικό κόμβο, που ονομάζεται ρίζα και συνδέεται μόνο με εξερχόμενες ακμές (outgoing) και όχι με εισερχόμενες (incoming). Στα δέντρα, επίσης χρησιμοποιείται μία \textit{τοπολογία πατέρα - παιδιού}, όπου κάθε κόμβος έχει πατέρα (εκτός τη ρίζα) και μπορεί να έχει από μηδέν ή περισσότερα παιδιά. Εάν ένας κόμβος δεν περιλαμβάνει παιδιά, αυτό υποδηλώνει ότι είναι τερματικός κόμβος και ονομάζεται \textit{φύλλο} (\textit{leaf}) του δέντρου.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/tree.png}
	\caption[Δέντρο: συνδεδεμένος, καυτευθυνόμενος και άκυκλος γράφος.]{Δέντρο: συνδεδεμένος, καυτευθυνόμενος και άκυκλος γράφος \cite{principles_of_robot_motion}.}
	\label{fig:tree}
\end{figure}


\bigskip
Η αναζήτηση μονοπατιού από έναν αρχικό κόμβο προς ένα κόμβο - στόχο σε ένα δέντρο, πραγματοποιείται με μεθόδους αναζήτησης μονοπατιού. Υπάρχουν δύο βασικές προσεγγίσεις που διακρίνονται, η \textit{αναζήτηση κατά βάθος} (\textit{depth-first search}) και η \textit{αναζήτηση κατά πλάτος}(\textit{breadth-first search}). Η αναζήτηση κατά βάθος ξεκινά από την ρίζα του δέντρου, επιλέγει ένα παιδί της ρίζας, έπειτα ένα παιδί του παιδιού της ρίζας και ούτω καθεξής, μέχρις ότου να βρεθεί σε φύλλο ή στον στόχο. Εάν βρεθεί σε φύλλο, τότε ανεβαίνει ένα επίπεδο πάνω και προχωράει στο επόμενο παιδί. Η διαδικασία αυτή επαναλαμβάνεται, μέχρις ότου βρεθεί ο στόχο ή καλυφθούν όλοι οι κόμβοι του δέντρου. Αντίθετα, η  αναζήτηση κατά πλάτος, λειτουργεί με την πεποίθηση ότι ο στόχος βρίσκεται κοντά στον αρχικό κόμβο - ρίζα. Έτσι, λοιπόν, ξεκινάει από την ρίζα, επισκέπτεται όλα τα παιδιά της ρίζας και έπειτα όλα τα εγγόνια (παιδιά των παιδιών) της ρίζας και ούτω καθεξής, μέχρις ότου επισκεφθεί τον στόχο, ή μέχρι να καλύψει όλους τους κόμβους του δέντρου.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.6\linewidth]{Chapters/Chapter3/Figures/tree_search_methods.png}
	\caption[Μέθοδοι αναζήτησης κατά βάθος (αριστερά) και κατά πλάτος (δεξιά) σε δέντρο.]{Μέθοδοι αναζήτησης κατά βάθος (αριστερά) και κατά πλάτος (δεξιά) σε δέντρο \cite{principles_of_robot_motion}.}
	\label{fig:tree_search_methods}
\end{figure}

\bigskip
Σε ρομποτικές εφαρμογές, συνήθως χρησιμοποιείται ένα \textit{πλέγμα} (\textit{grid}), για την αναπαράσταση του χώρου. Η δομή του πλέγματος, μπορεί να θεωρηθεί ως γράφος, εάν λάβουμε ως κόμβους του γράφου, τα pixels του πλέγματος και ως ακμές τις ενώσεις γειτονικών κελιών. Η γειτονικότητα των κελιών, συνήθως ορίζεται με βάση τον ορισμό της συνδετικότητας του γράφου, όπου επιλέγεται συνήθως συνδετικότητα τεσσάρων σημείων ή οκτώ σημείων, όπως παρουσιάζεται στο σχήμα \ref{fig:graph_connectivity}.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.5\linewidth]{Chapters/Chapter3/Figures/graph_connectivity.png}
	\caption[Πλέγμα και γράφοι συνδετικότητας τεσσάρων και οκτώ σημείων (από αριστερά προς τα δεξιά).]{Πλέγμα και γράφοι συνδετικότητας τεσσάρων και οκτώ σημείων (από αριστερά προς τα δεξιά) \cite{principles_of_robot_motion}.}
	\label{fig:graph_connectivity}
\end{figure}

\bigskip
Οι γράφοι πλέγματος, όπως είναι προφανές, δεν αποτελούν δέντρα. Παρόλα αυτά, με κάποιες παραδοχές, γίνεται, δυνατή η χρήση των προαναφερθέντων μεθόδων αναζήτησης κατά βάθος και κατά πλάτος. Συγκεκριμένα, η αναζήτηση κατά βάθος ξεκινάει από τον αρχικό κόμβο, επιλέγει ένα παιδί - κόμβο και μετέπειτα παιδιά - κόμβους με αυξανόμενη απόσταση από τον αρχικό κόμβο, μέχρις ότου βρεθεί σε κόμβο χωρίς παιδιά ή σε κόμβο που έχει ήδη επισκεφθεί. Αντίστοιχα, η αναζήτηση κατά πλάτος επισκέπτεται πρώτα τα κόμβους που ισαπέχουν από τον αρχικό κόμβο και έπειτα μεταβαίνει σε επόμενα επίπεδα κόμβων. Τέλος, υπάρχει και η περίπτωση των άπληστων μεθόδων αναζήτησης γράφων (greedy-search methods) που επεκτείνονται σε κόμβους που βρίσκονται κοντινότερα στον κόμβο, που έχει οριστεί ως στόχος. 

\subsubsection{Αλγόριθμοι Dijkstra και A*} \label{sssec:dijkstra_astar}
Οι πιο γνωστοί και δημοφιλείς αλγόριθμοι αναζήτησης μονοπατιού σε γράφο είναι οι αλγόριθμοι Dijkstra και A*. Ο αλγόριθμος Dijkstra αναπτύχθηκε από τον Edsger W. Dijkstra, το 1956, με στόχο την αναζήτηση του συντομότερου μονοπατιού διάσχισης μεταξύ δύο κόμβων σε έναν γράφο, βάσει αναζήτησης κατά πλάτος. Ο αλγόριθμος Α* αποτελεί μία γενίκευση του αλγορίθμου Dijkstra, που αναπτύχθηκε το 1968 από τους Peter Hart, Nils Nilsson και Bertram Raphael και βασίζεται στην χρήση \textit{ευρετικών} (\textit{heuristics}) μεθόδων για την κατεύθυνση του αναζήτησης, με στόχο την βελτιστοποίηση της όλης διαδικασίας αναζήτησης, όσον αφορά την ελαχιστοποίηση του αριθμού των επισκεπτόμενων κόμβων, την ελαχιστοποίηση του χρόνου εκτέλεσης κλπ.

\bigskip
Το μειονέκτημα των μεθόδων αναζήτησης κατά βάθος και κατά πλάτος, έγκειται στο γεγονός ότι δεν χρησιμοποιούν πληροφορία σχετικά με την θέση του κόμβου, που έχει οριστεί ως στόχος, για να κατευθύνουν την αναζήτηση. Το πρόβλημα αυτό λύνεται, από τον αλγόριθμο A* ο οποίος απαιτεί τον ορισμό μίας ευρετικής μεθόδου για την εκτίμηση του κόστους για την μετάβαση από έναν κόμβο στον δεδομένο στόχο. Η ευρετική αυτή μέθοδος χρησιμοποιείται κατά την επιλογή του νέου κόμβου, βάσει της απόστασης του από τον στόχο. Ο νέος στόχος, επομένως, πρέπει να εκφράζει την υψηλότερη πιθανότητα προσέγγισης του στόχου, με βάση τοπική πληροφορία. Η μέθοδος αυτή, παρόλα αυτά, δεν προσφέρει καμία εγγύηση για την σύγκλιση στο ολικώς βέλτιστο μονοπάτι.

\bigskip
Η απόδοση του αλγορίθμου A* βασίζεται στην επιλογή μίας καλής ευρετικής μεθόδου και επομένως, καθορίζει την πιθανότητα εύρεσης του βέλτιστου μονοπατιού. Μία ευρετική μέθοδος, θεωρείται καλή εάν είναι αισιόδοξη, δηλαδή εάν επιστρέφει κόστος, μικρότερο ή ίσο με το μήκος του βέλτιστου μονοπατιού για την μετάβαση από τον τρέχον κόμβο στον στόχο. Για παράδειγμα, μία αισιόδοξη ευρετική μέθοδος, που χρησιμοποιείται συχνά, είναι η ευκλείδια απόσταση ή απόσταση Manhattan μεταξύ του τρέχοντος κόμβου και του στόχου.

\bigskip
Αν ορίσουμε ως $h(n)$ την ευρετική συνάρτηση και $g(n)$ την συνάρτηση κόστους μετάβασης από τον αρχικό στον τρέχοντα κόμβο, τότε η συνάρτηση $f(n)$ που δηλώνει την εκτίμηση του κόστους μετάβασης από τον αρχικό κόμβο στον τελικό στόχο, μέσω του κόμβου $n$ ορίζεται ως

\begin{equation}\label{eq:astar_cost}
	f(n) = g(n) + h(n)
\end{equation}

\bigskip
Εδώ αξίζει να αναφερθεί, ότι αν λάβουμε $h(n)=0$, η σχέση (\ref{eq:astar_cost}) περιγράφει το κόστος επιλογής νέου κόμβου του αλγορίθμου Dijkstra, ενώ αν λάβουμε $g(n)=0$, τότε παίρνουμε την αντίστοιχη επιλογή νέου κόμβου του άπληστου αλγορίθμου αναζήτησης.

\begin{figure}[!ht]
	\centering
	\subfloat[Dijkstra]{
		\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/dijkstra.jpg}}
	\subfloat[Greedy]{
		\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/greedy.jpg}}
	\subfloat[A*]{
		\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/astar.jpg}}
	\caption[Σύγκριση αλγορίθμων αναζήτησης μονοπατιού σε γράφο πλέγματος Dijkstra, Greedy και A*.]{Σύγκριση αλγορίθμων αναζήτησης μονοπατιού σε γράφο πλέγματος με Dijkstra, Greedy και A* \cite{etsardou_phd}.}
	\label{fig:astar_and_dijkstra_comparison}
\end{figure}

% Τέλος, παρακάτω παρουσιάζεται ο ψευδοκώδικας του αλγορίθμου Α*.
%\begin{algorithm}
%	\label{alg:astar}
%	\caption{Αλγόριθμος A*}
%	\textbf{Input:} Graph\\
%	\textbf{Output:} Path between start and goal nodes
%	\begin{algorithmic}[1]
%		\Do
%			\State Pick $n_{best}$ from $O$ such that $f(n_{best}) \leq f(n),\, \forall  n \in O$.
%			\State Remove $n_{best}$ from $O$ and add to $C$.
%			\If{ $n_{best} = q_{goal}$}
%				 \State Return $O$
%			\EndIf
%			\State Expand $n_best$: $\forall x \in Star(n_{best})$ that are not in $C$.
%			\If{ $x \notin O$}
%				\State Add $x$ to $O$.
%			\Else{ \textbf{if} $g(n_{best}) + c(n_{best},x) < g(x)$\,\textbf{then}}
%				\State Update $x'$s backpointer to point to $n_{best}$.
%			\EndIf
%		\doWhile{ $O$ is not empty}
%	\end{algorithmic}
%\end{algorithm}
%
%\bigskip\noindent
%όπου
%\begin{description}
%	\item[Star(n):] το σετ των κόμβων που είναι γειτονικοί στον κόμβο $n$
%	\item[c(n_1, n_2):] μήκος ακμής μεταξύ κόμβων $n_1$ και $n_2$
%	\item[g(n):] μήκος μονοπατιού από τον κόμβο n μέχρι τον αρχικό κόμβο $q_{start}$
%	\item[h(n):] ευρετική συνάρτηση κόστους που επιστρέφει την εκτίμηση κόστους κοντινότερου μονοπατιού από τον κόμβο $n$ μέχρι τον αρχικό κόμβο $q_{start}$
%	\item[f(n)=g(n)+h(n):] εκτίμηση κόστους κοντινότερου μονοπατιού από τον αρχικό κόμβο $q_{start}$ μέχρι τον τελικό $q_{goal}$, μέσω του κόμβου $n$.
%\end{description}

\bigskip
Οι αλγόριθμοι Dijkstra και A* που εφαρμόζονται στον χώρο καταστάσεων, όπως παρουσιάστηκαν παραπάνω και με βάση τις παραδοχές που αναφέρθηκαν για την γεωμετρία και κινητικότητα του ρομπότ, αγνοούν πλήρως κινηματικούς και δυναμικούς περιορισμούς, που μπορεί να παρουσιάζει αυτό. Επίσης, αποτελούν μεθόδους ακατάλληλες για δυναμικά περιβάλλοντα, όπου ένα μονοπάτι, μπορεί να καταστεί μη προσπελάσιμο, με βάση τις πιο σύγχρονες πληροφορίες σχετικά με το περιβάλλον.



\subsubsection{Αλγόριθμος SBPL Lattice Planner} \label{sssec:sbpl}
Οι Maxim Likhachev και Dave Ferguson \cite{sbpl} προτείνουν έναν αλγόριθμο κατασκευής δυναμικά εφικτών μονοπατιών, μεγάλου μήκους για αυτόνομα οχήματα που κινούνται με υψηλές ταχύτητες (~25kph), ο οποίος χρησιμοποιήθηκε στον διαγωνισμό DARPA Urban Challenge, με πολύ θετικά αποτελέσματα. Ο αλγόριθμος, αυτός, βασίζεται σε μία \textit{χρονικά άμεση} και \textit{σταδιακή} αναζήτηση (\textit{anytime $\&$ incremental search}) σε ένα \textit{πολλαπλής-ανάλυσης δικτύωμα δυναμικά εφικτών καταστάσεων} (\textit{multi-resolution dynamically feasible lattice state space}).

\bigskip
Το \textit{δικτύωμα καταστάσεων} (\textit{state lattice}) ορίζεται ως μία διακριτοποίηση του χώρου καταστάσεων σε ένα σετ καταστάσεων και τις αντίστοιχες συνδέσεις μεταξύ αυτών, όπου μία σύνδεση μεταξύ δύο καταστάσεων, δηλώνει ένα εφικτό μονοπάτι. Επομένως, το πρόβλημα κατασκευής μονοπατιών μετασχηματίζεται και πάλι σε αναζήτηση σε γράφο. Σε αντίθεση με γράφους με συνδετικότητα τεσσάρων ή οκτώ σημείων, ο ορισμός της συνδετικότητας καταστάσεων στα δικτυωμάτα καταστάσεων εγγυάται ότι όποια λύση βρεθεί θα είναι κινηματικά και δυναμικά εφικτή, γεγονός που καθιστά τον εν λόγω αλγόριθμο κατάλληλο για μη ολονομικά οχήματα.

\bigskip
Στην προκειμένη περίπτωση για την αναπαράσταση μίας κατάστασης χρησιμοποιείται το διάνυσμα τεσσάρων μεταβλητών $s=(x, y, \theta, v)$, όπου $(x, y)$ είναι οι καρτεσιανές συντεταγμένες, $\theta$ ο προσανατολισμός και $v$ η ταχύτητα για την δεδομένη κατάσταση. Οι συντεταγμένες και ο προσανατολισμός είναι βασικοί για τον έλεγχο της εγκυρότητας μίας πόζας, δηλαδή κατά πόσο είναι εφικτή, ενώ η ταχύτητα που μπορεί να πάρει μόνο μέγιστη κατά απόλυτο τιμή, χρησιμοποιείται για να λαμβάνεται υπόψιν ο χρόνος που απαιτείται για την αντιστροφή της ταχύτητας, σε περιπτώσεις ελιγμών.

\bigskip
Για την κατασκευή των δικτυωμάτων καταστάσεων λαμβάνονται υπόψιν δύο βασικά σημεία. Πρώτον η  διακριτοποίηση / δειγματοληψία του χώρου καταστάσεων για την αναπαράσταση των καταστάσεων στο δικτύωμα και δεύτερον η κατασκευή ενός \textit{χώρου κινήσεων}(\textit{action space / control set}) που ορίζει τις δυναμικά εφικτές συνδέσεις μεταξύ δυο καταστάσεων. Ο χώρος κινήσεων θα πρέπει να είναι αρκετά πλήρης, ώστε να καθιστά δυνατή την κατασκευή όλων των δυνατών μονοπατιών στο δικτύωμα καταστάσεων, μέσω συνδυασμού ακολουθιών των βασικών δυνατών κινήσεων (motion primitives).

\bigskip
Για την μείωση του κόστους ελέγχου όλων των συνδυασμών των δυνατών κινήσεων για την κατασκευή ενός μονοπατιού μεταξύ δύο καταστάσεων, ο αλγόριθμος χρησιμοποιεί μία προσέγγιση πολλαπλής ανάλυσης, με βάση την οποία χρησιμοποιείται ένας χώρος ελέγχου υψηλής ανάλυσης για περιοχές κοντά στην αρχική και τελική κατάσταση και ένας χώρος ελέγχου χαμηλής ανάλυσης για το ενδιάμεσο τμήμα.

\bigskip
Η αναζήτηση στο δικτύωμα καταστάσεων πραγματοποιείται με βάση τις δυνατές κινήσεις και τα κόστη αυτών. Η πιο δημοφιλής μέθοδος αναζήτησης είναι ο αλγόριθμος A*, ο οποίος είναι αρκετά αποδοτικός και στοχεύει στην εύρεση του βέλτιστου μονοπατιού μεταξύ δύο καταστάσεων. Παρόλα αυτά λόγω του μεγέθους του προβλήματος που καλείται να λύσει, μπορεί να παραβιάζει χρονικούς περιορισμούς και άρα καθίσταται ανεπαρκής. Μία λύση στο πρόβλημα αυτό προσφέρουν παραλλαγές του αλγορίθμου A* που βασίζονται στην προσέγγιση της χρονικής αμεσότητας (Anytime A* variants), όπως ο αλγόριθμος ARA* (Anytime Repairing A*). Οι αλγόριθμοι, που ανήκουν σ' αυτήν την κατηγορία στοχεύουν στην εύρεση μίας αρχικής άκρως μη βέλτιστης λύσης, αλλά σε πολύ μικρό χρόνο, ενώ έπειτα, ασχολούνται με την συνεχή βελτίωση της λύσης αυτής, όσο επιτρέπεται από τους χρονικούς περιορισμούς.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=\linewidth]{Chapters/Chapter3/Figures/arastar.png}
	\caption[Αναζήτηση σε γράφο πλέγματος με Α* (αριστερά) και ARA* (δεξιά) για μειούμενο παράγοντα διαστολής $\epsilon$.]{Αναζήτηση σε γράφο πλέγματος με Α* (αριστερά) και ARA* (δεξιά) για φθίνοντα παράγοντα διαστολής $\epsilon$ \cite{arastar}.}
	\label{fig:arastar}
\end{figure}

\bigskip
Ο αλγόριθμος Α* και οι παραλλαγές του δουλεύουν αποτελεσματικότερα, όταν το περιβάλλον εργασίας είναι γνωστό από πριν και δεν μεταβάλλεται, κάτι αρκετά απίθανο στις περισσότερες ρομποτικές εφαρμογές. Ένα ρομπότ, δέχεται συνεχώς δεδομένα από τους αισθητήρες του μπορεί να μεταβάλλουν την αντίληψη του για το περιβάλλον και άρα μία λύση να καθίσταται μη εφικτή. Επίσης, τα περισσότερα περιβάλλοντα είναι \textit{δυναμικά}, δηλαδή περιλαμβάνουν κινούμενα αντικείμενα, όπως άλλα ρομπότ, οχήματα, ανθρώπους κα., στα οποία θα πρέπει να μπορεί να αντιδράσει το ρομπότ για να αποφύγει πιθανές συγκρούσεις. Το πρόβλημα αυτό θα μπορούσε να λυθεί χρησιμοποιώντας συνεχής ανανέωση του μονοπατιού, λύση που αποτελεί ιδιαίτερα κοστοβόρα και μπορεί να μην είναι χρονικά εφικτή. Επομένως, απαιτείται μία λύση που να στοχεύει στην \textit{επιδιόρθωση} τμημάτων της υπάρχουσας λύσης και όχι στην αντικατάστασης της από νέα, όπως για παράδειγμα ο αλγόριθμος D* και οι παραλλαγές του.

\bigskip
Ο αλγόριθμος αναζήτησης που προτείνουν οι Likhachev και Ferguson, είναι ο αλγόριθμος AD* (Anytime Dynamic A*). Ο αλγόριθμος AD* συνδυάζει τα θετικά και των δύο παραπάνω κατηγοριών, παραλλαγών Anytime A* και D* αλγορίθμων. Συγκεκριμένα, πραγματοποιεί μη βέλτιστες αναζητήσεις A*, μέσω διαστολής του κόστους λύσης κατά έναν μειούμενο παράγοντα $\epsilon > 1$, χρησιμοποιώντας παράλληλα πληροφορία από την προηγούμενη αναζήτηση. Επίσης, δανείζεται ιδέες από τον αλγόριθμο D* και τις παραλλαγές του, βάσει των οποίων, χρησιμοποιεί καινούργιες πληροφορίες, μόνο για τμήματα του χώρου αναζήτησης, που αφορούν την τρέχουσα κατάσταση και αναζήτηση. Αυτό επιτυγχάνεται με ανανέωση του μονοπατιού, μέσω αναζήτησης από την τελική κατάσταση (στόχος) προς τα πίσω μέχρι την τρέχουσα κατάσταση του ρομπότ.

\bigskip
Η απόδοση του αλγορίθμου AD*, όπως και του αλγοριμου Α*, βασίζεται απόλυτα στην επιλογή μίας αποδοτικής ευρετικής συνάρτησης $h(n)$ για την κατεύθυνση της αναζήτησης, η οποία μπορεί να μειώσει της απαιτήσεις της αναζήτησης σε χρόνο και μνήμη κατά τουλάχιστον μία τάξη μεγέθους. Μία γενική αισιόδοξη ευρετική συνάρτηση που μπορεί να χρησιμοποιηθεί αποτελεί η βέλτιστη λύση σε περιβάλλον χωρίς εμπόδια, που μπορεί να υπολογιστεί \textit{offline} και να αποθηκευθεί σε έναν ευρετικό πίνακα για ένα δεδομένο περιβάλλον. Παρόλα αυτά, η λύση αυτή δεν είναι πρακτική για διάφορα περιβάλλοντα. Αντίθετα, προτιμότερη είναι η \textit{online} λύση ενός απλοποιημένου προβλήματος αναζήτησης και η χρήση του αποτελέσματος για την κατεύθυνση του πιο σύνθετου προβλήματος αναζήτησης. Μία τέτοια λύση, αποτελεί η χρήση του αλγορίθμου αναζήτησης Dijkstra για την εύρεση του κόστους μονοπατιού από την κατάσταση του ρομπότ σε κάθε άλλη εφικτή κατάσταση στο περιβάλλον. Η ευρετική συνάρτηση Dijkstra μπορεί, παρόλα αυτά, να υπερεκτιμήσει το κόστος του μονοπατιού, αφού εκτιμάει την μετακίνηση του κέντρου του ρομπότ μόνο και άρα δεν είναι πάντα αισιόδοξη, όπως απαιτείται από τον αλγόριθμο. Για την επίλυση του προβλήματος αυτού, το κόστος κάθε κελιού στο δισδιάστατο πλέγμα (grid) που χρησιμοποιείται για την εξαγωγή του ευρετικού κόστους, ορίζεται ως ο μέσος όρος των κοστών των κελιών που βρίσκονται μέσα σε ένα κύκλο, με κέντρο το κελί που εξετάζεται και ακτίνα, την ακτίνα του κύκλου στον οποίο εγγράφεται το αποτύπωμα (footprint) του ρομπότ. Επομένως, το κόστος της μετάβασης $c(s,s')$ από μία κατάσταση $s$ σε μία κατάσταση $s'$ προκύπτει ως το μήκος του μονοπατιού μετάβασης επί του μέγιστου εκ των (α) μέσος όρος κόστους κελιών κατά την μετάβαση $c(s,s')$ και (β) μέγιστο κόστος κελιών, "τιμωρώντας" έτσι μεταβάσεις υψηλού κόστους (κοντά σε εμπόδια). Κάθε μια από τις δύο ευρετικές συναρτήσεις που αναφέρθηκαν, έχουν πλεονεκτήματα, ανά περίπτωση και γενικά λειτουργούν συμπληρωματικά. Επομένως, επιλέχθηκε ένας συνδυασμός τους, μέσω μίας νέας ευριστικής συνάρτησης $h(n)=max(h_{fsh}(s), h_{2D}(s))$, όπου $h_{fsh}(s)$ είναι η ευρετική συνάρτηση στον ελεύθερο από εμπόδια χώρο, ενώ η $h_{2D}(s)$ είναι η ευρετική συνάρτηση με βάση τα εμπόδια στο περιβάλλον.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=\linewidth]{Chapters/Chapter3/Figures/adstar.png}
	\caption[Αναζήτηση σε γράφο πλέγματος με AD* για μειούμενο παράγοντα διαστολής $\epsilon$.]{Αναζήτηση σε γράφο πλέγματος με ΑD* για φθίνοντα παράγοντα διαστολής $\epsilon$ \cite{adstar}.}
	\label{fig:adstar}
\end{figure}

\subsection{Αποφυγή Εμποδίων} \label{ssec:obstacle_avoidance}
%------------------------------------------------------------------------%
Η λειτουργία ενός αλγορίθμου δυναμικής αποφυγής εμποδίων είναι να χρησιμοποιεί τις πιο πρόσφατες μετρήσεις των αισθητήρων του ρομπότ για την ανανέωση της πεποίθησης του, για την θέση του, τη θέση του τρέχοντα στόχου και την τοπολογία του περιβάλλοντος, έτσι ώστε να μπορεί να προσαρμόζεται σε απρόσμενες καταστάσεις, αλλά ταυτόχρονα να μην αποκλίνει σημαντικά από τον δεδομένο στόχο.

\bigskip
Η αυτόνομη αποφυγή εμποδίων για ρομπότ, αποτελεί ένα εξαιρετικά μελετημένο αντικείμενο, με μεγάλο ερευνητικό ενδιαφέρον και συνεχή παραγωγή νέων μεθόδων και αλγορίθμων. Ένας από τους πιο απλοϊκούς αλγορίθμους αποφυγής εμποδίων είναι ο αλγόριθμος Bug, όπως επίσης και η εξέλιξη του Bug 2, οι οποίοι βασίζονται στην ακολούθηση του συνόρου των εμποδίων καθώς το ρομπότ κινείται προς τον δοσμένο στόχο. Όπως είναι προφανές, η συγκεκριμένη μέθοδος, δεν είναι πρακτική για πιο απαιτητικές εφαρμογές και επομένως έχουν αναπτυχθεί πολλές πιο ευφυείς μέθοδοι, κάποιες από τις οποίες εξετάστηκαν για την παρούσα υλοποίηση και παρουσιάζονται συνοπτικά στη συνέχεια.

\begin{itemize}
	
\item 	Ο αλγόριθμος \textbf{VFH} (Vector Field Histogram) που αναπτύχθηκε από τους \citeauthor{vfh} \cite{vfh}, βασίζεται στην παραγωγή ενός πολικού ιστογράμματος με βάση την πιθανότητα ύπαρξης εμποδίων ανά κατεύθυνση γύρω από το ρομπότ, μέσα σε ένα τοπικό τμήμα του περιβάλλοντος (ενεργό παράθυρο). Το ιστόγραμμα που παράγεται περιλαμβάνει "βουνά" και "κοιλάδες", που δηλώνουν την ύπαρξη εμποδίων και ελεύθερου χώρου, αντίστοιχα. Τελικά, επιλέγει την κατεύθυνση που παρουσιάζει την μικρότερη πιθανότητα ύπαρξης εμποδίων, χωρίς παράλληλα να αποκλίνει σημαντικά από τον στόχο. Αργότερα, οι \citeauthor{vfhp} επέκτειναν τον αλγόριθμο VFH στις εκδοχές VFH+\cite{vfhp} και VFH*\cite{vfhs}, για βελτίωση της ομαλότητας των μονοπατιών και εκμετάλλευση πληροφορίας από μονοπάτια, που παράγονται μέσω του αλγορίθμου A*, βάσει της ολικής διαθέσιμης πληροφορίας για το περιβάλλον.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.8\linewidth]{Chapters/Chapter3/Figures/vfh.jpg}
	\caption[Πολικό Ιστόγραμμα Πυκνότητας Εμποδίων βάσει του εμποδίων που βρίσκονται μέσα στο ενεργό παράθυρο.]{Πολικό Ιστόγραμμα Πυκνότητας Εμποδίων βάσει του εμποδίων που βρίσκονται μέσα στο ενεργό παράθυρο. \cite{vfh}.}
	\label{fig:vfh}
\end{figure}
	
\item	Ο αλγόριθμος \textbf{DWA} (Dynamic Window Approach) που αναπτύχθηκε από τους \citeauthor{dwa} \cite{dwa} και βασίζεται στην κατασκευή ενός χώρου ταχυτήτων (velocity space). Ο χώρος ταχυτήτων ορίζει τις κινηματικά και δυναμικά εφικτές ταχύτητες $(v,\omega)$, με τις οποίες μπορεί να κινηθεί το ρομπότ, λαμβάνοντας υπόψιν τα εμπόδια του περιβάλλοντος. Από τον χώρο ταχυτήτων, επιλέγει σε κάθε χρονικό βήμα, ένα \textit{δυναμικό παράθυρο} (\textit{Dynamic Window}), το οποίο ορίζει τις εφικτές ταχύτητες που μπορεί να φτάσει μέσα σε ένα χρονικό βήμα, με βάση την γραμμική και γωνιακή επιτάχυνση και επιβράδυνση. Τελικά, η επιλογή του ζεύγους ταχυτήτων $(v,\omega)$, πραγματοποιείται βάσει μίας αντικειμενικής συνάρτησης, που εφαρμόζεται σε όλα τα ζεύγη $(v, \omega)$ του δυναμικού παραθύρου. Η αντικειμενική αυτή συνάρτηση, γενικά, προτιμάει τροχιές που μειώνουν το σφάλμα προσανατολισμού του ρομπότ ως προς το στόχο, περιγράφονται από υψηλή ταχύτητα και κρατούν ασφαλή απόσταση από τα εμπόδια του περιβάλλοντος. Ο αλγόριθμος DWA, έχει μελετηθεί και επεκταθεί από αρκετούς ερευνητές, με την εξαιρετικά σημαντική περίπτωση του Global DWA, που αναπτύχθηκε από τους \citeauthor{gdwa} \cite{gdwa}. Ο αλγόριθμος Global DWA χρησιμοποιεί ολική πληροφορία (global information) για το περιβάλλον και όχι μόνο τοπική, αποφεύγοντας έτσι το πρόβλημα \textit{τοπικών ελαχίστων} (\textit{local minima}), που μπορεί να οδηγεί το ρομπότ σε αδιέξοδες καταστάσεις. Ο αλγόριθμος DWA και ιδιαίτερα η Global εκδοχή του αποτελούν μία εξαιρετικά δημοφιλής επιλογή για ρομποτικές εφαρμογές, λόγω του γεγονότος ότι λαμβάνει υπόψιν κινηματικούς και δυναμικούς περιορισμούς, χρησιμοποιεί ολική πληροφόρηση και μπορεί να κινείται, αποφεύγοντας εμπόδια σε υψηλές ταχύτητες.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.4\linewidth]{Chapters/Chapter3/Figures/dwa.png}
	\caption[Ενδεικτικός χώρος ταχυτήτων και δυναμικό παράθυρο του αλγορίθμου DWA.]{ Ενδεικτικός χώρος ταχυτήτων και δυναμικό παράθυρο του αλγορίθμου DWA \cite{dwa}. Η γκρίζα περιοχή δηλώνει τις περιοχές που προκαλούν σύγκρουση με εμπόδια.}
	\label{fig:dwa}
\end{figure}	

\item Ο αλγόριθμος \textbf{CVM} (Curvature Velocity Method) αναπτύχθηκε από τον \citeauthor{cvm} \cite{cvm}. Ο αλγόριθμος λαμβάνει υπόψιν κινηματικούς και δυναμικούς περιορισμούς, όπως επίσης και περιβαλλοντικούς περιορισμούς (εμπόδια), μέσω ενός χώρου ταχυτήτων $(v,\omega)$, αντίστοιχα, όπως και ο αλγόριθμος DWA. Ο αλγόριθμος CVM, όμως, αναπαριστά τα εμπόδια ως κύκλους ακτίνας r και ορίζει μη εφικτές τροχιές $c=\omega/v$, βάσει της ανισότητας $c_{min}<c<c_{max}$, όπου $c_{min}, c_{max}$ είναι οι εφαπτομενικές τροχιές στον κύκλο που αναπαριστά το εμπόδιο. Ο αλγόριθμος CVM, είναι επιρρεπείς στο πρόβλημα τοπικών ελαχίστων, καθώς λαμβάνει υπόψιν μόνο τοπική πληροφορία του χώρου. Μία βελτίωση του αλγορίθμου CVM, αποτελεί ο αλγόριθμος \textbf{LCM} (Lane Curvature Method), που αναπτύχθηκε από τους \citeauthor{lcm} \cite{lcm}. Σε αντίθεση με τον αλγόριθμο CVM, ο αλγόριθμος LCM χωρίζει τον χώρο σε λωρίδες (lanes) και επιλέγει την λωρίδα με το μεγαλύτερο μήκος και πλάτος, όσον αφορά τα εμπόδια. Αντίστοιχα, με τον αλγόριθμο DWA, οι αλγόριθμοι CVM Και LCM χρησιμοποιούν αντικειμενικές συναρτήσεις για την εύρεση της καλύτερης δυνατής τροχιάς.

\begin{figure}[!ht]
	\centering
	\subfloat[]{
		\includegraphics[height=5cm]{Chapters/Chapter3/Figures/cvm.png}}
	\subfloat[]{
		\includegraphics[height=5cm]{Chapters/Chapter3/Figures/lcm.png}}
	\caption[(α) Καθορισμός ελεύθερων τροχιών, με βάση τον αλγόριθμο CVM και (β) Χωρισμός του χώρου σε λωρίδες για μετάβαση στην πιο ελεύθερη λωρίδα, με βάση τον αλγόριθμο LCM.]{(α) Καθορισμός ελεύθερων τροχιών, με βάση τον αλγόριθμο CVM \cite{cvm} και (β) Χωρισμός του χώρου σε λωρίδες για μετάβαση στην πιο ελεύθερη λωρίδα, με βάση τον αλγόριθμο LCM \cite{lcm}.}
	\label{fig:cvm_and_lcm}
\end{figure}

\end{itemize}

\bigskip
Οι περισσότεροι αλγόριθμοι αποφυγής εμποδίων, όπως οι παραπάνω, παρότι, έχουν σημαντικά πλεονεκτήματα και αποδοτική συμπεριφορά σε πραγματικές συνθήκες, σχεδιάστηκαν από τους εμπνευστές τους για ολονομικά ή ψευδο-ολονομικά ρομπότ, που μπορούν να ακολουθήσουν μη ομαλές τροχιές ή τροχιές μηδενικής ακτίνας - επί τόπου στροφές (0-point turns). Όμως, τα μη ολονομικά ρομπότ που χρησιμοποιούν κινηματικά μοντέλα Ackermann ή Τετραδιεύθυνσης, παρουσιάζουν κάτω-φραγμένη ακτίνα τροχιάς ($|R| > R_{min}$), το οποίο καθιστά τις παραπάνω μεθόδους ανεπαρκή για την περίπτωση που εξετάζεται.

\bigskip
Για την λύση του προβλήματος της αποφυγής εμποδίων για την ρομποτική πλατφόρμα Monstertruck και γενικότερα για ρομπότ με κινηματικό Ackermann ή Τετραδιεύθυνσης, υλοποιήθηκε ένας αλγόριθμος, βάσει του αλγορίθμου \textbf{Bubble Band} που ανέπτυξαν οι \citeauthor{dpm} \cite{dpm}. Παρόλα αυτά πριν παρουσιαστεί ο αλγόριθμος Bubble Band και η προσεγγιστική υλοποίηση του, θα παρουσιάσουμε πρώτα τον αλγόριθμο της \textit{ελαστικής ζώνης} (\textit{elastic band}) των \citeauthor{eband} \cite{eband}, όπως επίσης και τα μονοπάτια Reeds-Shepp των J.J. Reeds και L.A. Shepp \cite{reeds_shepp}, που είναι απαραίτητες για την κατανόηση του αλγορίθμου Bubble Band.


\subsubsection{Ο αλγόριθμος της Ελαστικής Ζώνης} \label{sssec:eband}
Ο αλγόριθμος της ελαστικής ζώνης αναπτύχθηκε από τους \citeauthor{eband} \cite{eband} με στόχο την πλήρωση του χάσματος μεταξύ της κατασκευής μονοπατιού και του ελέγχου του ρομπότ, με έναν ομαλό και ασφαλή τρόπο. Η ιδέα πίσω από τον αλγόριθμο της ελαστικής ζώνης έχει να κάνει με την ελαστική παραμόρφωση ενός δεδομένου μονοπατιού, βάσει τεχνητών δυνάμεων, με στόχο την αποφυγή εμποδίων και την εξομάλυνση του μονοπατιού.

\bigskip
Ο αλγόριθμος της ελαστικής ζώνης αποσκοπεί στην μίμηση της συμπεριφοράς ενός λάστιχου που παραμορφώνεται, εξαιτίας ενός συνόλου δυνάμεων που ασκούνται σ' αυτό. Οι δυνάμεις αυτές είναι γενικά δύο ειδών, εσωτερικές ελκτικές δυνάμεις συστολής και εξωτερικές απωστικές δυνάμεις, που παραμορφώνουν το λάστιχο, μέχρι να φτάσει σε ένα επίπεδο ηρεμίας, δηλαδή μηδενικών συνισταμένων δυνάμεων. Στην περίπτωση, του αλγορίθμου της ελαστικής ζώνης, ορίζονται τεχνητές απωστικές δυνάμεις που τείνουν να απομακρύνουν την ελαστική ζώνη από εμπόδια και ελκτικές δυνάμεις που τείνουν να  μειώσουν την διαστολή - τέντωμα της.

\bigskip
Το κλειδί για την υλοποίηση του αλγορίθμου της ελαστικής ζώνης, αποτελεί η φούσκα (bubble). Η φούσκα ορίζεται ως το μέγιστο τοπικό, προσβάσιμο τμήμα του ελεύθερου χώρου, γύρω από μία κατάσταση $b$. Αν $\rho(b)$ είναι η ελάχιστη ευκλείδια απόσταση του ρομπότ στην κατάσταση $b$, από το κοντινότερο εμπόδιο, τότε είναι προφανές ότι το ρομπότ μπορεί να κινηθεί για απόσταση $\rho(b)$ προς οποιαδήποτε κατεύθυνση σε μια νέα κατάσταση $q$, χωρίς να έλθει σε σύγκρουση με κάποιο εμπόδιο. Το μέγεθος της φούσκας είναι ανάλογο της απόστασης $\rho(b)$ του ρομπότ σε μία κατάσταση $b$ από το κοντινότερο εμπόδιο, ενώ ουσιαστικά δηλώνει το σύνολο των δυνατών καταστάσεων $q$ στις οποίες μπορεί να διέλθει το ρομπότ από μία κατάσταση $b$. Επομένως, η φούσκα μπορεί να οριστεί μαθηματικά ως

\begin{equation}
	B(b) = \{q: ||b-q|| < \rho(b)\}
\end{equation}

\bigskip
Η ελαστική ζώνη κατασκευάζεται, αρχικά βάσει του ολικού μονοπατιού που παράγεται από έναν αλγόριθμο κατασκευής μονοπατιών (πχ. Α*), τοποθετώντας μία φούσκα σε κάθε ενδιάμεσο σημείο του μονοπατιού. Επομένως, η ελαστική ζώνη αναπαρίσταται από ένα πεπερασμένο σύνολο από φούσκες. Για να είναι τώρα δυνατή η κατασκευή ενός ασφαλούς μονοπατιού, θα πρέπει οι διαδοχικές φούσκες της ελαστικής ζώνης να επικαλύπτονται κατά ένα ποσοστό, δηλαδή όσο το μονοπάτι βρίσκεται εντός των φουσκών, αυτό είναι ασφαλές.

\bigskip
Η παραμόρφωση του μονοπατιού της ελαστικής ζώνης, πραγματοποιείται ασκώντας τις τεχνητές δυνάμεις που αναφέρθηκαν παραπάνω σε κάθε μία από τις φούσκες που αποτελούν την ελαστική ζώνη, σειριακά πάνω κάτω και με έναν πεπερασμένο αριθμό επαναλήψεων. Η άσκηση των τεχνητών δυνάμεων στις φούσκες έχει ως αποτέλεσμα, αυτές να μετακινούνται. Η μετακίνηση αυτή, παρόλα αυτά, έχει ως αποτέλεσμα διαδοχικές φούσκες να μην επικαλύπτονται επαρκώς ή να υπερκαλύπτονται. Επομένως, για να διατηρηθεί η συνθήκη της μερικής επικάλυψης, θα πρέπει να δημιουργούνται καινούργιες φούσκες για την περίπτωση της μη επαρκούς επικάλυψης και να διαγράφονται φούσκες που υπερκαλύπτονται. Με αυτόν τον τρόπο βελτιώνεται η απόδοση του αλγορίθμου.


\begin{figure}[!ht]
	\centering
	\includegraphics[width=\linewidth]{Chapters/Chapter3/Figures/eband.png}
	\caption[]{Παραμόρφωση ελαστικής ζώνης, βάσει ελκτικών δυνάμεων μεταξύ των φουσκών και απωστικών δυνάμεων που ασκούνται από το στατικό και το δυναμικό εμπόδιο \cite{eband}.}
	\label{fig:eband}
\end{figure}


\bigskip
Το μέγεθος και η κατεύθυνση της μετακίνηση μίας φούσκας καθορίζεται από τις τεχνητές ελκτικές  δυνάμεις $f_c$ και απωστικές δυνάμεις $f_r$ που ασκούνται σε αυτή και υπολογίζονται από τις από τις ακόλουθες σχέσεις.

\begin{align}
	\mathbf{f}_c &= k_c \cdot \left( \frac{\mathbf{b}_{i-1} - \mathbf{b}_i}{||\mathbf{b}_{i-1} - \mathbf{b}_i||} + \frac{\mathbf{b}_{i+1} - \mathbf{b}_i}{||\mathbf{b}_{i+1} - \mathbf{b}_i||}  \right)\\[1cm]
	\mathbf{f}_r &= \begin{cases}
				k_r \cdot \left(\rho_0 - \rho \frac{\partial\rho}{\partial \mathbf{b}}\right) \;\; &\rho < \rho_0\\
				0 \;\; &\rho \geq \rho_0
			 \end{cases}
\end{align}

\noindent όπου
\begin{description}
	\item[k_c]: κέρδος ελκτικής δύναμης
	\item[k_r]: κέρδος απωστικής δύναμης
\end{description}

\noindent και
\begin{equation}
	\frac{\partial\rho}{\partial \mathbf{b}} = \frac{1}{2h}
	\begin{bmatrix}
		\rho(b-h_x) - \rho(b+h_x)\\[0.5cm]
		\rho(b-h_y) - \rho(b+h_y)
	\end{bmatrix}
\end{equation}

Έπειτα, η μετατόπιση κάθε φούσκας μπορεί να υπολογιστεί χρησιμοποιώντας την προσεγγιστική σχέση 

\begin{equation}
	\mathbf{b}_{new} = \mathbf{b}_{old} + \alpha \cdot \mathbf{f}_{total} 
\end{equation}

\noindent όπου α είναι ένα κέρδος που μπορεί να οριστεί ως $\rho(\mathbf{b}_{old})$, βάσει της οποίας η μετατόπιση της φούσκας είναι αναλογική του μεγέθους της. Ουσιαστικά, πρόκειται, δηλαδή, για μία μέθοδο μέγιστης καθόδου για την εύρεση του σημείου ισορροπίας των δυνάμεων.



\subsubsection{Τα μονοπάτια Reeds-Shepp}\label{sssec:reeds_shepp}
Το 1990 οι J.A. Reeds και L. A. Shepp εκδώσαν μία επιστημονική έρευνα \cite{reeds_shepp} στην οποία περιγράφουν τα βέλτιστα μονοπάτια για ένα αυτοκίνητο που κινείται και εμπρός και πίσω. Συγκεκριμένα ορίζουν ένα σύνολο μονοπατιών που είναι επαρκές για κάθε συνδυασμό καταστάσεων, βέλτιστο από άποψη μήκους και μικρό σε πλήθος.

\bigskip
Το πρόβλημα που εξετάζεται είναι η κατασκευή βέλτιστου μονοπατιού για ένα αυτοκίνητο που κινείται και μπρος και πίσω με μοναδιαία ταχύτητα και παρουσιάζει άνω φραγμένη γωνία στρέψης των τροχών και άρα κάτω φραγμένη ακτίνα τροχιάς. Το εν λόγω σύστημα περιγράφεται από τις ακόλουθες σχέσεις.

\begin{align}
	\dot x &= u_1 \cdot \cos\theta\\
	\dot y &= u_1 \cdot \sin\theta\\
	\dot\theta &= u_1 \cdot u_2
\end{align}

\noindent όπου
\begin{description}
	\item[u_1:] η ταχύτητα με τιμές $\left\{-1,1\right\}$
	\item[u_2:] η καμπυλότητα της τροχιάς με τιμές στο διάστημα $\left[-\tan\phi_{max}, \tan\phi_{max}\right]$
	\item[\phi:] η γωνία στρέψης των μπροστινών τροχών του αυτοκινήτου με τιμές στο\\ διάστημα $\left[-\phi_{max}, \phi_{max}\right]$
	\item[\phi_{max}:] μέγιστη γωνία στρέψης τροχών με τιμή στο διάστημα $(0, \frac{\pi}{2})$
\end{description}

\bigskip
Ο στόχος, λοιπόν, είναι η ελαχιστοποίηση του μήκους $L$ μονοπατιού μετάβασης από μία κατάσταση $q_{start}$ σε μία κατάσταση $q_{goal}$ και συγκεκριμένα η ελαχιστοποίηση της σχέσης

\begin{equation}
	L(\widetilde q,\widetilde u) = \int_0^{t_F} \sqrt{\dot x^2 (t) + \dot y^2 (t)}\, dt
\end{equation}

\bigskip
Οι J.A. Reeds και L.A. Shepp απέδειξαν ότι τα βέλτιστα μονοπάτια για την εξεταζόμενη περίπτωση είναι το πολύ σαράντα οχτώ και αναπαρίστανται από ένα αντίστοιχο σύνολο λέξεων. Οι εν λόγω λέξεις συντίθενται από ένα σύνολο συμβόλων βασικών κινήσεων. Οι \textit{βασικές κινήσεις} (\textit{motion primitives}) περιγράφονται από τα σύμβολα $S$, $L$, $R$, όπου το σύμβολο $S$ δηλώνει ευθύγραμμη κίνηση, το σύμβολο $L$ δηλώνει αριστερή στροφή, ενώ το σύμβολο $R$ δεξιά στροφή. Επίσης, χρησιμοποιείται το σύμβολο "|" για να δηλώσει την αντιστροφή της φοράς κίνησης, αλλά και άνω δείκτης $\left\{+,-\right\}$ (πχ. $R^+$) που δηλώνουν την φορά κίνησης και κάτω δείκτες (πχ. $S_{1.5}$, $C_\frac{\pi}{2}$) που δηλώνουν το μέτρο του κάθε επιμέρους τμήματος - βασικής κίνησης ενός μονοπατιού. Αναπαριστώντας, τώρα τις βασικές κινήσεις στροφής $R$, $L$ με το σύμβολο $C$, το βέλτιστο μονοπάτι μπορεί να εκφραστεί βάσει των ακόλουθων βασικών λέξεων, για το πολύ πέντε βασικές κινήσεις.

\begin{align}
	\{
		C|C|C,\;
		&CC|C,\;
		C|CC,\;
		CSC,\;
		CC_{\beta}|C_{\beta}C,\;
		C|C_{\beta}C_{\beta}|C,\;\nonumber\\
		&C|C_{\frac{\pi}{2}}SC,\;
		CSC_{\frac{\pi}{2}}|C,\;
		C|C_{\frac{\pi}{2}}SC_{\frac{\pi}{2}}|C
	\}
	\label{eq:rs_base_words}
\end{align}

Χρησιμοποιώντας τις βασικές λέξεις (\ref{eq:rs_base_words}) για κάθε δυνατή περίπτωση, προκύπτουν οι σαράντα οχτώ διαφορετικές λέξεις, που αναπαριστούν τα μονοπάτια Reeds-Shepp, όπως φαίνεται στον πίνακα \ref{tab:rs48}.

\begin{table}[!ht]
	\centering
	\captionof{table}{Τα 48 είδη μονοπατιών Reeds-Shepp.}
	\label{tab:rs48}
	\begin{tabular}{| l | l |}
		\hline
	   \textbf{Βασική Λέξη} & \textbf{Δυνατές Ακολουθίες Βασικών Κινήσεων} \\ \hline
		$C|C|C$ & $(L^+R^-L^+), (L^-R^+L^-), (R^+L^-R^+), (R^-L^+R^-)$ \\ \hline
	   $CC|C$ & $(L^+R^+L^-), (L^-R^-L^+), (R^+L^+R^-), (R^-L^-R^+)$ \\ \hline
      $C|CC$ & $(L^+R^-L^-), (L^-R^+L^+), (R^+L^-R^-), (R^-L^+R^+)$ \\ \hline
      $CSC$ & $(L^+S^+L^+), (L^-S^-L^-), (R^+S^+R^+), (R^-S^-R^-),$ \\ & $(L^+S^+R^+), (L^-S^-R^-), (R^+S^+L^+), (R^-S^-L^-)$\\ \hline
      $CC_{\beta}|C_{\beta}C$ & $(L^+R^+_{\beta}L^-_{\beta}R^-), (L^-R^-_{\beta}L^+_{\beta}R^+), (R^+L^+_{\beta}R^-_{\beta}L^-), (R^-L^-_{\beta}R^+_{\beta}L^+)$\\ \hline
	   $C|C_{\beta}C_{\beta}|C$ & $(L^+R^-_{\beta}L^-_{\beta}R^+), (L^-R^+_{\beta}L^+_{\beta}R^-), (R^++L^-_{\beta}R^-_{\beta}L^+), (R^-L^+_{\beta}R^+_{\beta}L^-)$\\ \hline
	   $C|C_{\frac{\pi}{2}}SC$ & $(L^+R^-_{\frac{\pi}{2}}S^-R^-), (L^-R^+_{\frac{\pi}{2}}S^+R^+), (R^+L^-_{\frac{\pi}{2}}S^-L^-), (R^-L^+_{\frac{\pi}{2}}S^+L^+),$ \\ & $(L^+R^-_{\frac{\pi}{2}}S^-L^-), (L^-R^+_{\frac{\pi}{2}}S^+L^+), (R^+L^-_{\frac{\pi}{2}}S^-R^-), (R^-L^+_{\frac{\pi}{2}}S^+R^+)$ \\ \hline
      $CSC_\frac{\pi}{2}|C$ & $(L^+S^+L^+_\frac{\pi}{2}R^-), (L^-S^-L^-_\frac{\pi}{2}R^+), (R^+S^+R^+_\frac{\pi}{2}L^-), (R^-S^-R^-_\frac{\pi}{2}L^+),$ \\& $(R^+S^+L^+_\frac{\pi}{2}R^-), (R^-S^-L^-_\frac{\pi}{2}R^+), (L^+S^+R^+_\frac{\pi}{2}L^-), (L^-S^-R^-_\frac{\pi}{2}L^+)$ \\ \hline
      $C|C_\frac{\pi}{2}SC_\frac{\pi}{2}|C$ & $(L^+R^-_\frac{\pi}{2}S^-L^-_\frac{\pi}{2}R^+), (L^-R^+_\frac{\pi}{2}S^+L^+_\frac{\pi}{2}R^-), (R^+L^-_\frac{\pi}{2}S^-R^-_\frac{\pi}{2}L^+),$ \\ & $(R^-L^+_\frac{\pi}{2}S^+R^+_\frac{\pi}{2}L^-)$ \\ \hline
	\end{tabular}
\end{table}

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.4\linewidth]{Chapters/Chapter3/Figures/reeds_shepp_rlr.png}
	\caption[Παράδειγμα μονοπατιού Reeds-Shepp $R^+_{\alpha}L^-_{\beta}R^+_{\gamma}$.]{Παράδειγμα μονοπατιού Reeds-Shepp $R^+_{\alpha}L^-_{\beta}R^+_{\gamma}$ \cite{planning_algorithms}.}
	\label{fig:reeds_shepp_rlr}
\end{figure}

\bigskip
Τέλος, οι H.J. Sussmann και G. Tang \cite{reeds_shepp_46} απέδειξαν ότι οι ακολουθίες $ (L^-R^+L^-)$, $(R^-L^+R^-)$ είναι πλεονάζουσας και μπορούν να παραληφθούν και επομένως προκύπτουν τελικά σαράντα έξι δυνατές ακολουθίες, που μπορούν να περιγράψουν τα βέλτιστα μονοπάτια για ένα αυτοκίνητο όχημα που μπορεί να κινείται και μπρος και πίσω με κάτω φραγμένη ακτίνα τροχιάς.


\subsubsection{Ο Αλγόριθμος Bubble Band} \label{sssec:bubble_band}
Οι M. Khatib, H. Jaouni, R. Chatila και J.P. Laumond \cite{dpm} ανέπτυξαν τον αλγόριθμο Bubble Band με στόχο την δυναμική παραμόρφωση των μονοπατιών μη ολονομικών ρομπότ, ούτως ώστε να προσαρμόζονται σε μεταβολές του περιβάλλοντος, ενώ παράλληλα να υπακούν σε δυναμικούς περιορισμούς του ρομπότ, χωρίς να θυσιάζεται η επίτευξη του τρέχοντα στόχου.

\bigskip
Ο αλγόριθμος Bubble Band, ορίζει την \textit{μη ολονομική φούσκα} (\textit{nonholonomic bubble}), για ένα μη ολονομικό ρομπότ, ως το μέγιστο τοπικά προσβάσιμο τμήμα του χώρου, γύρω από μία κατάσταση, λαμβάνοντας υπόψιν τυχόν εμπόδια, όπως επίσης και τους μη ολονομικούς περιορισμούς του ρομπότ. Ο αλγόριθμος Bubble Band, χρησιμοποιεί ένα μονοπάτι, που έχει κατασκευασθεί από έναν αλγόριθμο που δεν λαμβάνει υπόψιν μη ολονομικούς περιορισμούς, όπως ο Α* και παραμορφώνει το μονοπάτι αυτό, βάσει της μεθόδου της \textit{ελαστικής ζώνης}, των S. Quinlan και O. Khatib \cite{eband}, που αναφέρθηκε παραπάνω.

\bigskip
Σε αντίθεση με την φούσκα που χρησιμοποιεί ο αλγόριθμος της ελαστικής ζώνης, η μη ολονομική φούσκα παράγεται βάσει των αποστάσεων του ρομπότ σε μία κατάσταση $q$ από τα εμπόδια, αλλά και βάσει του κινηματικού και δυναμικού μοντέλου του ρομπότ. Αυτό το επιτυγχάνει χρησιμοποιώντας μία διαφορετική μετρική απόστασης κατά την κατασκευή της φούσκας. Συγκεκριμένα, ενώ ο αλγόριθμος της ελαστικής ζώνης χρησιμοποιεί την ευκλείδια απόσταση για να βρει το κοντινότερο εμπόδιο, ο αλγόριθμος Bubble Band χρησιμοποιεί μία μετρική, που ονομάζεται \textit{μη ολονομική απόσταση}(nonholonomic distance). Η μη ολονομική απόσταση ορίζεται από τους J.P. Laumond και P. Soueres \cite{rs_metric} στον χώρο καταστάσεων $R^2 \times S^1$ ως το κοντινότερο μονοπάτι μεταξύ δύο καταστάσεων. Επομένως, μία μη ολονομική φούσκα $B(p)$ κατασκευάζεται βάσει της μικρότερης μη ολονομικής απόστασης μεταξύ της κατάστασης $p$ που οδηγεί σε σύγκρουση.

\bigskip
Με βάση τα παραπάνω η μη ολονομική φούσκα στην κατάσταση $p$, με ακτίνα $r$ δηλώνει το σύνολο των εφικτών καταστάσεων $q$ στις οποίες μπορεί να μεταβεί το ρομπότ από την κατάσταση $p$, με την μη ολονομική απόσταση $d(p,q)$ μεταξύ των καταστάσεων $p$ και $q$ να είναι κατά μέτρο μικρότερη από $r$. Η μαθηματική αναπαράσταση της μη ολονομικής φούσκας προκύπτει ως

\begin{equation}
	B(p,r) = \left\{q \in R^2 \times S^1 \; | \; d(p,q)<r \right\}
\end{equation}

\begin{figure}[!ht]
	\centering
	\includegraphics[height=4cm]{Chapters/Chapter3/Figures/nh_bubble.png}
	\caption[Μη ολονομική φούσκα.]{Μη ολονομική φούσκα \cite{dpm}.}
	\label{fig:nh_bubble}
\end{figure}

Αντίστοιχα με την συνθήκη μερικής επικάλυψης του αλγορίθμου ελαστικής ζώνης που αναφέρθηκε στην ενότητα \ref{sssec:eband}, ορίζεται και οι συνθήκες επικάλυψης του αλγορίθμου Bubble Band ως η απαίτηση δύο διαδοχικές φούσκες να επικαλύπτονται, αλλά να μην υπερκαλύπτονται. Αυτό σημαίνει ότι για τρεις διαδοχικές φούσκες $B(p_{i-1},r_{i-1})$, $B(p_i,r_i)$, $B(p_{i+1},r_{i+1})$ θα πρέπει να ισχύουν οι σχέσεις

\begin{align}
	d(p_{i}, p_{i+1}) \leq r_i + r_{i+1} - \epsilon_c
	\label{eq:bb_undercoverage_condition} \\[0.5cm]
	d(p_{i-1}, p_{i+1}) \geq r_{i-1} + r_{i+1} - \epsilon_o
	\label{eq:bb_overcoverage_condition}
\end{align}

\noindent όπου $\epsilon_c$, $\epsilon_o$ θετικές μικρές σταθερές.

\bigskip
Σε περίπτωση που δεν ικανοποιείται η σχέση (\ref{eq:bb_undercoverage_condition}) για δύο διαδοχικές φούσκες, τότε θα πρέπει να δημιουργείται μία ενδιάμεση φούσκα, ενώ σε περίπτωση που δεν ισχύει η σχέση \ref{eq:bb_overcoverage_condition} τότε θα πρέπει να διαγράφεται η ενδιάμεση φούσκα. Επίσης, για να αποφεύγεται η συνεχής δημιουργία και διαγραφή φουσκών θα πρέπει να επιλέγονται οι σταθερές $\epsilon_c$, $\epsilon_o$ τέτοιες ώστε $\epsilon_c < \epsilon_o$.

\bigskip
Σαν αποτέλεσμα, ένα βέλτιστο μονοπάτι Reeds-Shepp μεταξύ των κέντρων δύο διαδοχικών φουσκών $\;B(p_i,r_i)$, $B(p_{i+1},r_{i+1})\;$ θα περιέχεται εξολοκλήρου μέσα στην ένωση τους $\;B(p_i,r_i) \;\cup\; B(p_{i+1},r_{i+1})\;$, γεγονός που καθιστά το μονοπάτι ασφαλές, όπως φαίνεται και στο σχήμα \ref{fig:bubble_band_path}. Επομένως, μπορεί να κατασκευασθεί ένα ασφαλές μονοπάτι, μέσω της εύρεσης επιμέρους βέλτιστων μονοπατιών Reeds-Shepp μεταξύ των κέντρων των φουσκών.

\begin{figure}[!ht]
	\centering
	\includegraphics[height=4cm]{Chapters/Chapter3/Figures/bubble_band_path.png}
	\caption[Βέλτιστο ασφαλές μονοπάτι μεταξύ των κέντρων δυο μη ολονομικών φουσκών.]{Βέλτιστο ασφαλές μονοπάτι μεταξύ των κέντρων δυο μη ολονομικών φουσκών \cite{dpm}.}
	\label{fig:bubble_band_path}
\end{figure}

\bigskip
Ο αλγόριθμος Bubble Band ξεκινάει με ένα ολικό μονοπάτι και το δειγματοληπτεί, λαμβάνοντας ένα σύνολο σημείων κατά μήκους του μονοπατιού. Έπειτα δημιουργεί μία μη ολονομική φούσκα για κάθε ένα από τα επιμέρους σημεία και ξεκινάει την διαδικασία παραμόρφωσης μέσω της άσκησης τεχνητών δυνάμεων, ενώ παράλληλα ελέγχει την συνδετικότητα και αλληλοκάλυψη των φουσκών και ανάλογα με την περίπτωση δημιουργεί ή διαγράφει φούσκες. Όπως και με τον αλγόριθμο της ελαστικής ζώνης οι τεχνητές δυνάμεις που ασκούνται στις φούσκες, χωρίζονται σε εσωτερικές - ελκτικές και εξωτερικές - απωστικές δυνάμεις. Οι εσωτερικές δυνάμεις αναπαριστούν την αλληλεπίδραση μεταξύ διαδοχικών φουσκών και τείνουν να τοποθετούν μία φούσκα πάνω στο κοντινότερο μονοπάτι που ενώνει τις διαδοχικές της φούσκες ενώ οι εξωτερικές δυνάμεις δηλώνουν την αλληλεπίδραση μίας φούσκας με τα εμπόδια και τείνουν να απομακρύνουν την φούσκα από τα εμπόδια. Με βάση τα παραπάνω προκύπτει ένα δυναμικό πεδίο από την συνισταμένη δράση των δυναμικών πεδίων που δημιουργούν τις εσωτερικές και εξωτερικές δυνάμεις. Στην συνέχεια παρουσιάζονται οι σχέσεις των δυναμικών πεδίων των εσωτερικών και εξωτερικών δυνάμεις.

\begin{figure}
	\centering
	\subfloat[]{\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/initial_bubble_band.jpg}}
	\subfloat[]{\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/equilibrium_bubble_band.jpg}}
	\subfloat[]{\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/dynamic_bubble_band.jpg}}
	\caption{(α')Δημιουργία ζώνης φουσκών, (β')παραμόρφωση και (γ') αντίδραση σε δυναμικό εμπόδιο \cite{dpm}.}
\end{figure}

\begin{align}
		P_f(p_i) &= \frac{K_f}{2}(d(p_i,p_{i+1}) - (r_i+r_{i+1}) + \epsilon_c) \times (d(p_i,p_{i+1}) - (r_i+r_{i+1}) + \epsilon_o)\\[0.5cm]
		P_b(p_i) &= \frac{K_b}{2}(d(p_i,p_{i-1}) - (r_i+r_{i-1}) + \epsilon_c) \times (d(p_i,p_{i-1}) - (r_i+r_{i-1}) + \epsilon_o)\\[0.5cm]
		P_c(p_i) &= \frac{K_c}{2}(d^\gamma(p_i))^2
\end{align}

\noindent όπου
\begin{description}
	\item[P_f:] το δυναμικό πεδίο που μεταξύ των φουσκών $B(p_i)$, $B(p_{i+1})$
	\item[P_b:] το δυναμικό πεδίο που μεταξύ των φουσκών $B(p_{i-1})$, $B(p_i)$
	\item[P_c:] το δυναμικό πεδίο που ασκείται που τείνει να συστάλλει το μονοπάτι 
	\item[d^\gamma:] η μικρότερη μη ολονομική απόσταση μεταξύ των φουσκών $Β(p_{i-1})$ και $Β(p_{i+1})$
	\item[K_f:] κέρδος δύναμης από την επόμενη διαδοχικά φούσκα $B(p_{i+1})$
	\item[K_b:] κέρδος δύναμης από την προηγούμενη διαδοχικά φούσκα $B(p_{i-1})$
	\item[K_c:] κέρδος δύναμης συστολής
\end{description}

\noindent Αντίστοιχα, τα δυναμικά πεδία των εξωτερικών δυνάμεων από τα εμπόδια \cite{dpm_phd} υπολογίζονται ως

\begin{align}
	P_r(p_i) =
	\begin{cases}
		\frac{K_r}{2} (d^O_{cs}(p_i) - d_c)^2 + \frac{K_{\infty}}{2} (\frac{1}{d^O_{cs}(p_i)} - \frac{1}{d_c})^2 \, &,\;\;  d^O_{cs}(p_i) \leq d_c\\[0.3cm]
		0 &,\;\; \text{αλλιώς}
	\end{cases}
\end{align}

\noindent όπου
\begin{description}
	\item[P_r:] δυναμικό πεδίο απωστικών δυνάμεων από εμπόδια
	\item[K_r, K_{\infty}:] κέρδη απωστικών δυνάμεων
	\item[d^O_{cs}:] κοντινότερο μονοπάτι Reeds-Shepp από εμπόδια
	\item[d_c:] άνω κατώφλι απόστασης από τα εμπόδια για περιορισμό του μεγέθους της φούσκας
\end{description}

\bigskip
Τέλος, η εξαγωγή των εσωτερικών και εξωτερικών δυνάμεων μπορεί να γίνει με την εφαρμογή του τελεστή $\,-\nabla\,$, στις αντίστοιχες εξισώσεις δυναμικού.

\subsubsection{Ο Αλγόριθμος Reeds-Shepp Band} \label{sssec:rsband}
Ο αλγόριθμος Reeds-Shepp Band που υλοποιήθηκε στα πλαίσια της παρούσας διπλωματικής εργασίας, όπως προαναφέρθηκε, βασίστηκε στον αλγόριθμο Bubble Band, που αναλύθηκε παραπάνω και αποτελεί μία απλοποιημένη προσέγγιση αυτού. 

\bigskip
Λόγω της αυξημένης πολυπλοκότητας υπολογισμού της μη ολονομικής απόστασης, σε αντίθεση με την ευκλείδια και συνεπώς και του υπολογισμού των επιμέρους δυνάμεων που παραμορφώνουν το δοσμένο ολικό μονοπάτι, επιλέχθηκε, τελικά, η χρησιμοποίηση του απλούστερου και λιγότερο απαιτητικού αλγορίθμου της ελαστικής ζώνης. Ο αλγόριθμος της ελαστικής ζώνης, όπως ορίστηκε παραμορφώνει δυναμικά το δοσμένο ολικό μονοπάτι, αλλά δεν λαμβάνει υπόψιν του μη ολονομικούς περιορισμούς. 

\bigskip
Για την μετατροπή της ελαστικής ζώνης σε ένα δυναμικά και κινηματικά εφικτό μονοπάτι λαμβάνεται το σύνολο των κέντρων των φουσκών της ελαστικής ζώνης και για κάθε δύο διαδοχικά κέντρα παράγεται ένα μονοπάτι Reeds-Shepp. Σε αντίθεση με τον αλγόριθμο Bubble Band, παρόλα αυτά, ένα μονοπάτι Reeds-Shepp που ενώνει τα κέντρα δύο φουσκών της ελαστικής ζώνης, μπορεί να μην περιλαμβάνεται πλήρως μέσα στις φούσκες, με αποτέλεσμα να υπάρχει κίνδυνος σύγκρουσης με εμπόδια, εάν δεν υπάρχει πρόσθετος έλεγχος σύγκρουσης. Επομένως, για την λύση του προβλήματος αυτού πραγματοποιείται έλεγχος σύγκρουσης για κάθε κατάσταση ενός υποψήφιου μονοπατιού Reeds-Shepp, το οποίο γίνεται δεκτό ή απορρίπτεται ανάλογα με το αποτέλεσμα.

\bigskip
Επίσης, με στόχο την μείωση του υπολογιστικού φόρτου, η δημιουργία της ελαστικής ζώνης πραγματοποιείται για ένα τοπικό τμήμα του ολικού μονοπατιού, αλλά παράλληλα ανανεώνεται δυναμικά όσο κινείται το ρομπότ για αποφυγή δυναμικών απρόσμενων καταστάσεων. Επίσης, μπορεί να γίνει περαιτέρω μείωση του υπολογιστικού φόρτου, κατά το στάδιο της μετατροπής της ελαστικής ζώνης σε μονοπάτια Reeds-Shepp, επιλέγοντας την κατασκευή μονάχα ενός μονοπατιού Reeds-Shepp μεταξύ του κέντρου της φούσκας που αντιστοιχεί στην τρέχουσα κατάσταση του ρομπότ και του κέντρου της επόμενης διαδοχικά φούσκας στην ελαστική ζώνη, ή σε επόμενη, εάν η απόσταση μεταξύ των δύο κέντρων είναι μικρότερη από ένα κατώφλι.

\begin{figure}[!ht]
	\centering
	\includegraphics[height=6cm]{Chapters/Chapter3/Figures/rsband_diagram.png}
	\caption{Το διάγραμμα σταδίων παραμόρφωσης ολικού μονοπατιού μέσω αλγορίθμου ελαστικής ζώνης και μονοπατιών Reeds-Shepp.}
	\label{fig:rsband_diagram}
\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Διάσχιση Μονοπατιού} \label{ssec:path_following}
%------------------------------%
Έχοντας κατασκευάσει ένα μονοπάτι για να ακολουθήσει το ρομπότ, με στόχο την μετάβαση από μία αρχική σε μία τελική κατάσταση, το πρόβλημα που απομένει είναι ο ορισμός ενός νόμου ελέγχου που θα παράγει τις κατάλληλες ταχύτητες και θα επιτρέψει στο ρομπότ να κινηθεί με τον αναμενόμενο τρόπο. Πολλές προσεγγίσεις αλγορίθμων αποφυγής εμποδίων, όπως ο αλγόριθμος DWA \cite{dwa} που αναφέρθηκε στην ενότητα \ref{ssec:obstacle_avoidance} παράγουν τροχιές στον χώρο των ταχυτήτων, για την ασφαλή ακολούθηση ολικού μονοπατιού, με αποτέλεσμα να λύνονται τρία προβλήματα ταυτόχρονα. Στην προκειμένη περίπτωση, παρόλα αυτά, χρησιμοποιείται η κατασκευή ενός τοπικού, ασφαλούς και κινηματικά και δυναμικά εφικτού μονοπατιού στο επίπεδο και επομένως, θα πρέπει να ορισθεί ένας ξεχωριστός νόμος ελέγχου που θα παράγει τις εντολές ελέγχου, δηλαδή τις ταχύτητες με τις οποίες θα πρέπει να κινηθεί το ρομπότ για να ακολουθήσει αποτελεσματικά το εν λόγω μονοπάτι.

\bigskip
Οι αλγόριθμοι ή μέθοδοι διάσχισης μονοπατιού συνήθως χωρίζονται σε δύο κατηγορίες, ανοικτού και κλειστού βρόχου. Οι αλγόριθμοι διάσχισης μονοπατιού, ανοικτού βρόχου, συνήθως, λύνουν το πρόβλημα, μέσω του, εκ των προτέρου διαχωρισμού ενός μονοπατιού σε μία ακολουθία ευθύγραμμων τμημάτων και καμπυλών και τον υπολογισμό των εντολών ταχύτητας για την ακολούθηση της ακολουθίας των τμημάτων. Σαν αποτέλεσμα, δεν λαμβάνουν υπόψιν απρόσμενες καταστάσεις, όπως ολίσθηση, αλλά και ατέλειες κινηματικού και δυναμικού μοντέλου του ρομπότ και επομένως μπορεί να αποκλίνουν σημαντικά από την επιθυμητή συμπεριφορά. Αντίθετα, μέθοδοι διάσχισης μονοπατιού, κλειστού βρόχου, λειτουργούν δυναμικά, μετασχηματίζοντας το πρόβλημα της διάσχισης μονοπατιού, στο πρόβλημα της επιλογής ενός υπό-στόχου και την παραγωγή εντολών ελέγχου για την ακολούθηση του στόχου αυτού, λαμβάνοντας υπόψιν την τρέχουσα κατάσταση του ρομπότ και την απόκλιση από την επιθυμητή συμπεριφορά, δηλαδή, για παράδειγμα τα σφάλματα θέσης και προσανατολισμού από το τρέχοντα υπό-στόχο. Οι μέθοδοι κλειστού βρόχου, όπως είναι προφανές είναι αποδοτικότεροι και πιο εύρωστοι από μεθόδους ανοικτού βρόχου, αλλά απαιτούν την ύπαρξη τεχνικών για την συνεχή εκτίμηση της κατάστασης του ρομπότ και τον υπολογισμό των αποκλίσεων του από το επιθυμητό μονοπάτι. Στην προκειμένη περίπτωση, εφόσον παρέχεται η εκτίμηση της κατάστασης του ρομπότ επιλέχθηκε να χρησιμοποιηθεί ένας αλγόριθμος διάσχισης μονοπατιού, κλειστού βρόχου.

\bigskip
Το αντικείμενο της διάσχισης μονοπατιού για ρομποτικά οχήματα, έχει ερευνηθεί εκτενώς από τον ερευνητικό κόσμο, αλλά έχει επικεντρωθεί κατά κύριο λόγο σε ολονομικά ή ψευδο-ολονομικά ρομπότ, όπως ρομπότ με κινηματικό μοντέλο omnidirectional, differential drive και skid steer drive. Παράλληλα, υπάρχει και επαρκής έρευνα για την ακολούθηση μονοπατιού για μη ολονομικά ρομπότ, όπως το συμβατικό αυτοκίνητο με κινηματικό Ackermann. Παρόλα αυτά, η περίπτωση του κινηματικού μοντέλου τετραδιεύθυνσης που εξέταζεται δεν έχει μελετηθεί εκτενώς, λόγω της περιορισμένης χρήσης του σε ρομποτικές εφαρμογές, αλλά και στην αυτοκινητοβιομηχανία. Επίσης, ακόμα και οι ερευνητές που έχουν μελετήσει το πρόβλημα της διάσχισης μονοπατιού για ρομποτικά οχήματα με τετραδιεύθυνση, όπως στις δημοσιεύσεις \cite{sm_ptc}, \cite{hybrid_ptc}, \cite{fuzzy_ptc_counter_steering}, εστιάζονται περισσότερο στην κίνηση με αρνητική/αντίστροφη τετραδιεύθυνση, χωρίς να εκμεταλλεύονται πλήρως τις δυνατότητες του εν λόγω κινηματικού μοντέλου. Ακόμα και όταν μελετάται το πρόβλημα της θετικής τετραδιεύθυνσης, συνήθως χρησιμοποιείται είτε για την αύξηση της σταθερότητας του αυτοκινήτου, είτε για ομαλή αλλαγή λωρίδων σε υψηλές ταχύτητες, όπου λαμβάνουν χώρα φαινόμενα διαταραχών, περίπτωση που δεν είχε νόημα να εξεταστεί στα πλαίσια της παρούσας εργασίας, καθώς μιλάμε για ρομποτικές εφαρμογές χαμηλών ταχυτήτων.

\bigskip
Μεγάλο ενδιαφέρον παρουσιάζει η πρόταση των \citeauthor{offroad_adaptive_control} \cite{offroad_adaptive_control} για έναν αλγόριθμο διάσχισης μονοπατιού, μέσω προσαρμοστικού ελέγχου για την αντιστάθμιση φαινομένων ολίσθησης, ο οποίος ουσιαστικά στοχεύει στην μείωση της πλευρικής απόκλισης από το μονοπάτι που ακολουθεί, προσπαθώντας ταυτόχρονα να κρατήσει μικρό σφάλμα προσανατολισμού. Επίσης, εξίσου ενδιαφέρουσα, αν όχι περισσότερο, είναι και η πρόταση των \citeauthor{reactive_fuzzy_ptc} \cite{reactive_fuzzy_ptc} για έναν αλγόριθμο διάσχισης μονοπατιού με ταυτόχρονη αποφυγή εμποδίων, βασισμένο σε Ασαφή Λογική (Fuzzy Logic), που ανεξαρτητοποιεί τις εντολές στρέψης των μπροστινών από τους πίσω τροχούς, όπου οι πίσω τροχοί χρησιμοποιούνται, όμοια με τον αλγόριθμο των \citeauthor{offroad_adaptive_control} \cite{offroad_adaptive_control} για την αντιστάθμιση της πλευρικής απόκλισης από ένα δοσμένο μονοπάτι.

\bigskip
Με βάση τις δύο μεθόδους που παρουσιάστηκαν παραπάνω, αποφασίστηκε η ανάπτυξη ενός αλγορίθμου διάσχισης μονοπατιού, που εκμεταλλεύεται την θετική τετραδιεύθυνση για την αντιστάθμιση της πλευρικής απόκλισης σε περίπτωση ολίσθησης, διαταραχής ή ατελειών του νόμου ελέγχου, ενώ παράλληλα θα χρησιμοποιεί αρνητική τετραδιεύθυνση σε περίπτωση κλειστών στροφών. Επίσης, αποφασίστηκε η ανάπτυξη του αλγορίθμου να γίνει με Ασαφή Λογική, όπως η υλοποίηση των \citeauthor{reactive_fuzzy_ptc} \cite{reactive_fuzzy_ptc}, καθώς η Ασαφής Λογική διευκολύνει σημαντικά την διαδικασία υλοποίησης, ενώ παράλληλα προσφέρει υψηλούς βαθμούς προσαρμοστικότητας και επέκτασης.

\subsubsection{Ελεγκτές Ασαφούς Λογικής} \label{sssec:fuzzy_controllers}
οι μεταβλητές εισόδου ενός ελεγκτή ασαφούς λογικής (FLC), ονομάζονται ασαφής μεταβλητές (fuzzy variables) και συσχετίζονται με ένα σύνολο ασαφών συνόλων (fuzzy set). Κάθε ασαφές σύνολο χαρακτηρίζεται από μία συνάρτηση συμμετοχής (membership variable), που δηλώνει κατά πόσο τις εκατό, μία τιμή της ασαφούς μεταβλητής ανήκει στο εν λόγω ασαφές σύνολο. Για την υλοποίηση του ασαφούς ελεγκτή διάσχισης που παρουσιάζεται πιο κάτω, χρησιμοποιήθηκαν ράμπες, τριγωνικές και τραπεζοειδής συναρτήσεις συμμετοχής, οι οποίες παρουσιάζονται στο σχήμα \ref{fig:membership_functions} ορίζονται ως

\begin{align}
	RampUpMF(x_l, x_r, x) = 
		\begin{cases}
			0, &\text{εάν}\; x \leq x_l\\
			\frac{x-x_l}{x_r-x_l}	, &\text{εάν}\; x_l \leq x \leq x_r\\
			1, &\text{εάν}\; x \geq x_r			 
		\end{cases}\\[0.5cm]
	RampDownMF(x_l, x_r, x) = 
		\begin{cases}
			1, &\text{εάν}\; x \leq x_l\\
			\frac{x_r-x}{x_r-x_l}	, &\text{εάν}\; x_l \leq x \leq x_r\\
			0, &\text{εάν}\; x \geq x_r			 
		\end{cases}\\[0.5cm]
	TriangleMF(x_l, x_c, x_r, x) =
		\begin{cases}
			0, &\text{εάν}\; x \leq x_l\\
			\frac{x-x_l}{x_c-x_l}	, &\text{εάν}\; x_l \leq x \leq x_c\\
			\frac{x_r-x}{x_r-x_c}, &\text{εάν}\; x_c \leq x \leq x_r\\
			0, &\text{εάν}\; x \geq x_r
		\end{cases}\\[0.5cm]
	TrapezoidMF(x_l, x_{cl}, x_{cr}, x_r, x) =
		\begin{cases}
			0, &\text{εάν}\; x \leq x_l\\
			\frac{x-xl}{x_{cl}-x_l}	, &\text{εάν}\; x_l \leq x \leq x_{cl}\\
			1, & \text{εάν}\; x_{cl} \leq x \leq x_{cr}\\
			\frac{x_r-x}{x_r-x_{cr}}, &\text{εάν}\; x_c \leq x \leq x_{cr}\\
			0, &\text{εάν}\; x \geq x_r			 
		\end{cases}
\end{align}

\begin{figure}
	\centering
	\subfloat[]{\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/rampup_mf.png}}
	\subfloat[]{\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/rampdown_mf.png}}\\[-0.25cm]
	\subfloat[]{\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/triangle_mf.png}}
	\subfloat[]{\includegraphics[width=0.3\linewidth]{Chapters/Chapter3/Figures/trapezoid_mf.png}}
	\caption{Συναρτήσεις συμμετοχής ασαφούς συνόλου, που χρησιμοποιήθηκαν στον ασαφή ελεγκτή διάσχισης μονοπατιού.}
	\label{fig:membership_functions}
\end{figure}

\bigskip
Η γενική αρχιτεκτονική ενός ελεγκτή ασαφούς λογικής αποτελείται από τέσσερα βασικά τμήματα και τρία στάδια επεξεργασίας. όπως παρουσιάζονται στο σχήμα \ref{fig:fuzzy_controller_architecture}.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.6\linewidth]{Chapters/Chapter3/Figures/fuzzy_controller_architecture.png}
	\caption{Γενική Αρχιτεκτονική Ασαφούς Ελεγκτή.}
	\label{fig:fuzzy_controller_architecture}
\end{figure}

\bigskip\noindent
Τα επιμέρους τμήματα της γενικής αρχιτεκτονικής του ελεγκτή ασαφούς λογικής περιγράφονται ως ακολούθως.
\begin{itemize}
	\item Η \textbf{Βάση Γνώσης} (\textit{Knowledge Base}) περιλαμβάνει τις ασαφείς μεταβλητές και τα αντίστοιχα τους ασαφή σύνολα, τα οποία αναπαρίστανται βάσει συναρτήσεων συμμετοχής, όπως επίσης και τους ασαφείς κανόνες, τύπου "if <conditions> then <action>".
	\item Στο στάδιο της \textbf{Aσαφοποίηση} (\textit{Fuzzification}), μία κανονική τιμή (crisp value) μίας ασαφούς μεταβλητής εισόδου ασαφοποιείται σε ζεύγη (ασαφές σύνολο, ποσοστό συμμετοχής), μέσω αντιστοίχισης της τιμής με την συνάρτηση συμμετοχής κάθε ασαφούς συνόλου.
	\item Στο στάδιο του \textbf{Συμπερασμού} (\textit{Inference}), λαμβάνονται οι ασαφείς είσοδοι, εφαρμόζονται οι ασαφείς κανόνες σε αυτούς και παράγεται μία ασαφής έξοδος.
	\item Στο στάδιο της \textbf{Αποασαφοποίησης} (\textit{Defuzzification}), τα ασαφή σύνολα που παράγονται από κάθε κανόνα στο στάδιο του συμπερασμού μετατρέπονται σε κανονικές τιμές, μέσω σταθμισμένου μέσου (weighted average) Takagi-Sugeno:
	\begin{equation}
		WA = \frac{\sum_{i=1}^n \mu(x_i)x_i}{\sum_{i=1}^n \mu(x_i)}
	\end{equation}
\end{itemize}

\subsubsection{Ασαφής Ελεγκτής Διάσχισης Μονοπατιού} \label{sssec:fuzzy_ptc}
Όπως, προαναφέρθηκε, στόχος του αλγορίθμου διάσχισης μονοπατιού, κλειστού βρόχου είναι να ακολουθήσει όσο πιο εύρωστα γίνεται μία διαδρομή, μέσω του ορισμού υπό-στόχων κατά μήκος του μονοπατιού. Επομένως, το μονοπάτι προς διάσχιση αναπαρίσταται ως μία ακολουθία προσανατολισμένων σημείων στο επίπεδο. Επομένως, βάσει ενός μονοπατιού $\left\{p_1, p_2, ..., p_n\right\}$ που πρέπει να ακολουθήσει το ρομπότ για να μεταβεί από μία αρχική κατάσταση $q_I=[x_I, y_I, \theta_I]$ σε ένα στόχο - μία τελική κατάσταση $q_F=[x_F, y_F, \theta_F]$, επιλέγεται ένας υπό-στόχος $q_G=[x_G, y_G, \theta_G]$ πάνω στο εν λόγω μονοπάτι. Σαν αποτέλεσμα, το πρόβλημα της διάσχισης μονοπατιού μετασχηματίζεται σε ένα πρόβλημα προσέγγισης διαδοχικών υπό-στόχων, το οποίο συνεπάγεται έναν νόμο ελέγχου που θα τείνει να μειώνει την απόκλιση μεταξύ του ρομπότ και του τρέχοντα υπό-στόχου, μέχρι τελικά να φτάσει στην επιθυμητή τελική κατάσταση.

\bigskip
Η απόκλιση μεταξύ δύο καταστάσεων στο επίπεδο, μπορεί να οριστεί με διάφορους τρόπους, μέσω ενός συνόλου σφαλμάτων. Μία συνήθης επιλογή, αποτελεί η ευκλείδια απόσταση και το σφάλμα προσανατολισμού μεταξύ δύο καταστάσεων. Στην προκειμένη περίπτωση, για την ικανοποίηση των στόχων του αλγορίθμου διάσχισης μονοπατιού, επιλέχθηκε το ακόλουθο σύνολο τεσσάρων σφαλμάτων που παρουσιάζεται και παραστατικά στο σχήμα \ref{fig:ptc_errors}.

\begin{itemize}
	\item \textbf{$E_o$}:\; Σφάλμα προσανατολισμού μεταξύ κατάστασης ρομπότ και τρέχοντα υπό-στόχου.
	\item \textbf{$E_p$}:\; Σφάλμα απόστασης μεταξύ θέσης ρομπότ και τρέχοντα υπό-στόχου.
	\item \textbf{$E_{a}$}:\; Σφάλμα γωνιακής απόκλισης μεταξύ θέσης ρομπότ και τρέχοντα υπό-στόχου.
	\item \textbf{$E_y$}:\; Σφάλμα πλευρικής απόκλισης μεταξύ θέσης ρομπότ και τρέχοντα υπό-στόχου.
\end{itemize}

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.5\linewidth]{Chapters/Chapter3/Figures/ptc_errors.png}
	\caption{Σφάλματα μεταξύ τρέχουσας κατάστασης ρομπότ και τρέχοντα υπό-στόχου\\ που επιλέχθηκαν για την υλοποίηση του αλγορίθμου διάσχισης μονοπατιού.}
	\label{fig:ptc_errors}
\end{figure}

\bigskip
Τα σφάλματα $E_o$, $E_p$, $E_a$, $E_y$ χρησιμοποιούνται ως είσοδοι στον ελεγκτή ασαφούς λογικής που σχεδιάστηκε για την ακολούθηση μονοπατιού. Αντίστοιχα, ως έξοδοι του ελεγκτή ορίζονται οι γωνίες $\delta_f$, $\delta_r$ στρέψης των μπροστά και πίσω τροχών και η ταχύτητα $v$ του οχήματος, όπως παρουσιάζεται στο σχήμα \ref{fig:ptc_block_diagram}

\bigskip
\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.8\linewidth]{Chapters/Chapter3/Figures/ptc_block_diagram.png}
	\caption{Βρόχος ελέγχου λειτουργίας διάσχισης μονοπατιού.}
	\label{fig:ptc_block_diagram}
\end{figure}

\bigskip
Επίσης, για την μείωση του απαιτούμενου αριθμού ασαφών κανόνων του προβλήματος ορίζεται η μεταβλητή εισόδου, $Direction$, που δηλώνει την φορά κίνησης συναρτήσει του σφάλματος γωνίας απόκλισης $E_a$ ως

\begin{equation}
	\textit{Direction} =
		\begin{cases}
			-1,\;\; &\text{εάν}\; |E_a| > 120^o\\
			1, \;\; &\text{εάν}\; |E_a| < 120^o
		\end{cases}
\end{equation}

\bigskip
Ο ελεγκτής διάσχισης μονοπατιού αποτελείται από τρεις επιμέρους ανεξάρτητους ελεγκτές, κάθε ένας υπεύθυνος για τον καθορισμό μίας από τις τρεις εξόδους $\delta_f$, $\delta_r$, $v$ του συστήματος. Συγκεκριμένα, οι ελεγκτές παρουσιάζονται στο σχήμα \ref{fig:fuzzy_ptc_inside} και ορίζονται ως ακολούθως.


\begin{figure}[!ht]
	\centering
	\includegraphics[height=8cm]{Chapters/Chapter3/Figures/fuzzy_ptc_inside.png}
	\caption{Ο ελεγκτής διάσχισης μονοπατιού.}
	\label{fig:fuzzy_ptc_inside}
\end{figure}

\begin{itemize}
	\item Ο \textbf{ασαφής ελεγκτής ταχύτητας} (\textbf{Speed Fuzzy Logic Controller}) παίρνει ως είσοδο το σφάλμα θέσης $E_p$ και την φορά κίνησης $Direction$ και παρέχει ως έξοδο την ταχύτητα $v$ κίνησης του ρομπότ.

	\item Ο \textbf{ασαφής ελεγκτής μπροστινοδιεύθυνσης} (\textbf{Front Steering Fuzzy Logic Controller}) παίρνει ως είσοδο τα σφάλματα $E_o$, $E_a$, $E_p$ και την φορά κίνησης $Direction$ και παράγει ως έξοδος την γωνία στρέψης $\delta_f$ των μπροστινών τροχών.
	
	\item Ο \textbf{ασαφής ελεγκτής απόκλισης πισωδιεύθυνσης} (\textbf{Rear Steering Deviation Fuzzy Logic Controller}) παίρνει ως είσοδο τα σφάλματα $E_o$, $E_y$ και την φορά κίνησης $Direction$ και παράγει την επιθυμητή γωνία απόκλισης της γωνίας στρέψης των πίσω τροχών από την αντίθετη γωνία στρέψης των μπροστινών τροχών. Επομένως, η γωνία στρέψης των πίσω τροχών προκύπτει ως 
	
\begin{equation}
	\delta_r = - \delta_f + \alpha_r	
\end{equation}

\end{itemize}


\bigskip
Στη συνέχεια για κάθε μία από τις εισόδους του ελεγκτή ορίζονται ένα σύνολο ασαφών συνόλων και οι αντίστοιχες συναρτήσεις συμμετοχής, όπως παρουσιάζεται στο σχήμα \ref{fig:ptc_input_mfs}.

\bigskip
\begin{figure}[!ht]
	\centering
	\subfloat[$\mu_{Eo}\; \text{και}\; \mu_{Ea}$]{\includegraphics[height=0.3\linewidth]{Chapters/Chapter3/Figures/eo_ea_mf.png}}\\
	\subfloat[$\mu_{Ep}$]{\includegraphics[height=0.3\linewidth]{Chapters/Chapter3/Figures/ep_mf.png}}
	\subfloat[$\mu_{Ey}$]{\includegraphics[height=0.3\linewidth]{Chapters/Chapter3/Figures/ey_mf.png}}
	\subfloat[$\mu_{Direction}$]{\includegraphics[height=0.3\linewidth]{Chapters/Chapter3/Figures/direction_mf.png}}
	\caption{Οι συναρτήσεις συμμετοχής των μεταβλητών εισόδου του ελεγκτή διάσχισης μονοπατιού.}
	\label{fig:ptc_input_mfs}
\end{figure}

\bigskip
Αντίστοιχα, ορίζονται και τα ασαφή σύνολα των εξόδων του ελεγκτή διάσχισης μονοπατιού, όπως παρουσιάζεται στο σχήμα \ref{fig:ptc_output_mfs}.

\bigskip
\begin{figure}[!ht]
	\centering
	\subfloat[$\mu_{speed}$]{\includegraphics[height=0.3\linewidth]{Chapters/Chapter3/Figures/speed_mf.png}}
	\subfloat[$\mu_{FSA}\; \text{και}\; \mu_{RSA}$]{\includegraphics[height=0.3\linewidth]{Chapters/Chapter3/Figures/df_dr_mf.png}}\\
	\caption{Οι συναρτήσεις συμμετοχής των μεταβλητών εξόδου του ελεγκτή διάσχισης μονοπατιού.}
	\label{fig:ptc_output_mfs}
\end{figure}

\bigskip
Έχοντας ορίσει τις μεταβλητές εισόδου, εξόδου και τα αντίστοιχα ασαφή σύνολα και συναρτήσεις συμμετοχής, το μόνο που μένει είναι ο ορισμός των ασαφών κανόνων της βάση γνώσης του ελεγκτή. Η επιλογή των ασαφών κανόνων των τριών επιμέρους ελεγκτών του ελεγκτή διάσχισης μονοπατιού, πραγματοποιήθηκε βάσει της επιθυμητής συμπεριφοράς του ελεγκτή ανά ένα σύνολο περιπτώσεων. Οι περιπτώσεις που πρέπει ικανοποιούν οι ασαφείς κανόνες έχουν ως εξής:

\begin{enumerate}
	\item Η ταχύτητα θα πρέπει να είναι η μέγιστη δυνατή, όταν το όχημα βρίσκεται μακρυά από τον στόχο και να ελαττώνεται όταν πλησιάζει σ' αυτόν.
	\item Στην περίπτωση που το όχημα βρίσκεται μακρυά από τον στόχο θα πρέπει η γωνία στρέψης των μπροστινών τροχών να στρέφεται ανάλογα με το μέγεθος και την κατεύθυνση του σφάλματος γωνιακής απόκλισης. Γι αυτήν την περίπτωση δεν μας ενδιαφέρει, τόσο το σφάλμα προσανατολισμού, όσο η προσέγγιση του στόχου.
	\item Στην περίπτωση που το όχημα βρίσκεται κοντά στον στόχο, αντιθέτως, δεν μας ενδιαφέρει η προσέγγιση του στόχου, μιας και είμαστε είδη κοντά, αλλά η διόρθωση του σφάλματος προσανατολισμού.
	\item Στην περίπτωση που το σφάλμα προσανατολισμού είναι μικρό και η πλευρική απόκλιση δεν είναι εξαιρετικά μεγάλη, θα πρέπει η απόκλιση της γωνίας στρέψης των πίσω τροχών να είναι μεγάλη, ούτως ώστε, το όχημα να κινείται με θετική τετραδιεύθυνση, κρατώντας το σφάλμα προσανατολισμού μικρό. Η περίπτωση αυτή είναι χρήσιμη για την περίπτωση ολίσθησης ή για διόρθωση μικρής πλευρικής απόκλισης.
	\item Σε περίπτωση που το σφάλμα προσανατολισμού είναι μικρό, αλλά το σφάλμα πλευρικής απόκλισης είναι πολύ μεγάλο τότε θα πρέπει η απόκλιση της γωνίας στρέψης των πίσω τροχών να είναι μηδενική, ούτως ώστε, το όχημα να κινείται με αρνητική τετραδιεύθυνση, με στόχο την προσέγγιση του μονοπατιού, διορθώνοντας το σφάλμα γωνιακής απόκλισης και πλευρικής απόκλισης, χωρίς να λαμβάνεται υπόψιν το σφάλμα προσανατολισμού.
	\item Ο ελεγκτής θα πρέπει να μπορεί να ικανοποιεί τις παραπάνω περιπτώσεις και για τις δύο δυνατές φορές κίνησης, εμπρός και πίσω.
\end{enumerate}

\begin{table}[!ht]
	\centering
	\captionof{table}{Οι ασαφείς κανόνες του ελεγκτή ταχύτητας.}
	\label{tab:speed_fuzzy_rules}
	\begin{tabular}{| l | l |}
		\hline
	   \rotatebox[origin=c]{90}{\textbf{\,Speed Fuzzy Rules\,}} &
	   %------------------
		\begin{tabular}{l}
		   if Ep is CLOSE then Speed is SLOW\\
   			if Ep is FAR then Speed is FAST
   		\end{tabular}\\ \hline
   	\end{tabular}
\end{table}

\begin{table}[!ht]
	\centering
	\captionof{table}{Οι ασαφείς κανόνες του ελεγκτή της γωνίας στρέψης των μπροστινών τροχών.}
	\label{tab:fsa_fuzzy_rules}
	\begin{tabular}{| c | l |}
		\hline
	   \rotatebox[origin=c]{90}{\textbf{FSA Fuzzy Rules}} &
	   %----------------------
   		\begin{tabular}{l}
	   if Ep is FAR and Ea is RBL then FSA is  Z\\
      if Ep is FAR and Ea is  RL then FSA is LH\\
      if Ep is FAR and Ea is  SL then FSA is LH\\
      if Ep is FAR and Ea is  FL then FSA is LL\\
      if Ep is FAR and Ea is  FA then FSA is  Z\\
      if Ep is FAR and Ea is  FR then FSA is RL\\
      if Ep is FAR and Ea is  SR then FSA is RH\\
      if Ep is FAR and Ea is  RR then FSA is RH\\
    	if Ep is FAR and Ea is RBR then FSA is  Z\\
	   if Ep is CLOSE and Direction is FW and Eo is SL then FSA is LH\\
    	if Ep is CLOSE and Direction is FW and Eo is FL then FSA is LL\\
    	if Ep is CLOSE and Direction is FW and Eo is FA then FSA is Z\\
    	if Ep is CLOSE and Direction is FW and Eo is FR then FSA is RL\\
    	if Ep is CLOSE and Direction is FW and Eo is SR then FSA is RH\\
   		if Ep is CLOSE and Direction is BW and Eo is SL then FSA is RH\\
	   if Ep is CLOSE and Direction is BW and Eo is FL then FSA is RL\\
	   if Ep is CLOSE and Direction is BW and Eo is FR then FSA is LL\\
    	if Ep is CLOSE and Direction is BW and Eo is SR then FSA is LH
		\end{tabular}\\ \hline
	\end{tabular}
\end{table}

\begin{table}[!ht]
	\centering
	\captionof{table}{Οι ασαφείς κανόνες του ελεγκτή της απόκλισης της γωνίας στρέψης των πίσω τροχών.}
	\label{tab:rsda_fuzzy_rules}
	\begin{tabular}{| c | l |}
		\hline
	   \rotatebox[origin=c]{90}{\textbf{RSDA Fuzzy Rules}} &
	   %----------------------
		\begin{tabular}{l}
    	if Eo is not FA and Eo is not FR and Eo is not FL then RSDA is Z\\
    	if Direction is FW and Eo is FA and Ey is BP then RSDA is  Z\\
    	if Direction is FW and Eo is FL and Ey is BP then RSDA is  Z\\
    	if Direction is FW and Eo is FR and Ey is BP then RSDA is  Z\\
    	if Direction is FW and Eo is FA and Ey is SP then RSDA is LH\\
    	if Direction is FW and Eo is FL and Ey is SP then RSDA is LH\\
    	if Direction is FW and Eo is FR and Ey is SP then RSDA is LH\\
    	if Direction is FW and Eo is FA and Ey is  Z then RSDA is  Z\\
    	if Direction is FW and Eo is FL and Ey is  Z then RSDA is  Z\\
    	if Direction is FW and Eo is FR and Ey is  Z then RSDA is  Z\\
    	if Direction is FW and Eo is FA and Ey is SN then RSDA is RH\\
    	if Direction is FW and Eo is FL and Ey is SN then RSDA is RH\\
    	if Direction is FW and Eo is FR and Ey is SN then RSDA is RH\\
    	if Direction is FW and Eo is FA and Ey is BN then RSDA is  Z\\
    	if Direction is FW and Eo is FL and Ey is BN then RSDA is  Z\\
    	if Direction is FW and Eo is FR and Ey is BN then RSDA is  Z\\
    	if Direction is BW and Eo is FA and Ey is BP then RSDA is  Z\\
    	if Direction is BW and Eo is FL and Ey is BP then RSDA is  Z\\
    	if Direction is BW and Eo is FR and Ey is BP then RSDA is  Z\\
	   	if Direction is BW and Eo is FA and Ey is SP then RSDA is LH\\
    	if Direction is BW and Eo is FL and Ey is SP then RSDA is LH\\
    	if Direction is BW and Eo is FR and Ey is SP then RSDA is LH\\
    	if Direction is BW and Eo is FA and Ey is  Z then RSDA is  Z\\
    	if Direction is BW and Eo is FL and Ey is  Z then RSDA is  Z\\
    	if Direction is BW and Eo is FR and Ey is  Z then RSDA is  Z\\
    	if Direction is BW and Eo is FA and Ey is SN then RSDA is RH\\
    	if Direction is BW and Eo is FL and Ey is SN then RSDA is RH\\
    	if Direction is BW and Eo is FR and Ey is SN then RSDA is RH\\
    	if Direction is BW and Eo is FA and Ey is BN then RSDA is  Z\\
    	if Direction is BW and Eo is FL and Ey is BN then RSDA is  Z\\
    	if Direction is BW and Eo is FR and Ey is BN then RSDA is  Z
    	\end{tabular}\\ \hline
	\end{tabular}
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\begin{figure}[!ht]
%	\centering
%	\includegraphics[width=\linewidth]{Chapters/Chapter3/Figures/.png}
%	\caption[]{ \cite{}.}
%	\label{fig:}
%\end{figure}
